(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ;b=a.MySPA=a.MySPA||{};c=b.Client=b.Client||{};d=a.StartupCode$MySPA$Client=a.StartupCode$MySPA$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Obj=e.Obj||{};g=e.UI=e.UI||{};h=g.Var$1=g.Var$1||{};i=e.List=e.List||{};j=i.T=i.T||{};k=b.Pages=b.Pages||{};l=k.Stock=k.Stock||{};m=g.ListModel=g.ListModel||{};n=e.Operators=e.Operators||{};o=g.View=g.View||{};p=a.MySPA_Router=a.MySPA_Router||{};q=a.MySPA_Templates=a.MySPA_Templates||{};r=g.Router=g.Router||{};s=e.Arrays=e.Arrays||{};t=g.Templating=g.Templating||{};u=t.Runtime=t.Runtime||{};v=u.Server=u.Server||{};w=v.ProviderBuilder=v.ProviderBuilder||{};x=g.TemplateHole=g.TemplateHole||{};y=g.Var=g.Var||{};z=g.ConcreteVar=g.ConcreteVar||{};A=g.Snap=g.Snap||{};B=e.Random=e.Random||{};C=g.Storage=g.Storage||{};D=e.Seq=e.Seq||{};E=e.Concurrency=e.Concurrency||{};F=a.EventTarget;G=a.WindowOrWorkerGlobalScope;H=e.JavaScript=e.JavaScript||{};I=H.JS=H.JS||{};J=e.ClientSideJson=e.ClientSideJson||{};K=J.Provider=J.Provider||{};L=H.Pervasives=H.Pervasives||{};M=e.Enumerator=e.Enumerator||{};N=e.Sitelets=e.Sitelets||{};O=N.RouterOperators=N.RouterOperators||{};P=N.RouterModule=N.RouterModule||{};Q=N.Route=N.Route||{};R=v.TemplateInstance=v.TemplateInstance||{};S=g.TemplateHoleModule=g.TemplateHoleModule||{};T=S.Elt=S.Elt||{};U=S.Text=S.Text||{};V=e.Unchecked=e.Unchecked||{};W=a.System=a.System||{};X=W.Guid=W.Guid||{};Y=e.Control=e.Control||{};Z=Y.FSharpEvent=Y.FSharpEvent||{};_0=v.Handler=v.Handler||{};_1=e.Charting=e.Charting||{};_2=_1.Renderers=_1.Renderers||{};_3=_2.ChartJs=_2.ChartJs||{};_4=_1.LiveChart=_1.LiveChart||{};_5=b.Chart=b.Chart||{};_6=g.Doc=g.Doc||{};_7=g.Abbrev=g.Abbrev||{};_8=_7.Fresh=_7.Fresh||{};_9=C.ArrayStorage=C.ArrayStorage||{};_=e.Collections=e.Collections||{};$=_.Dictionary=_.Dictionary||{};ba=a.Object;bb=N.Router=N.Router||{};bc=N.List=N.List||{};bd=e.Option=e.Option||{};be=a.Node;bf=e.Numeric=e.Numeric||{};bg=S.TextView=S.TextView||{};bh=S.VarFloatUnchecked=S.VarFloatUnchecked||{};bi=S.VarStr=S.VarStr||{};bj=S.EventQ=S.EventQ||{};bk=Y.Event=Y.Event||{};bl=bk.Event=bk.Event||{};bm=_2.ChartJsInternal=_2.ChartJsInternal||{};bn=_1.Charts=_1.Charts||{};bo=bn.LineChart=bn.LineChart||{};bp=_1.Pervasives=_1.Pervasives||{};bq=_1.Chart=_1.Chart||{};br=g.Docs=g.Docs||{};bs=E.Scheduler=E.Scheduler||{};bt=M.T=M.T||{};bu=_.FSharpMap=_.FSharpMap||{};bv=_.Map=_.Map||{};bw=e.Strings=e.Strings||{};bx=e.Utils=e.Utils||{};by=_.HashSet=_.HashSet||{};bz=v.TemplateInitializer=v.TemplateInitializer||{};bA=S.VarBool=S.VarBool||{};bB=S.VarDateTime=S.VarDateTime||{};bC=S.VarFile=S.VarFile||{};bD=S.VarDomElement=S.VarDomElement||{};bE=g.Client=g.Client||{};bF=bE.Templates=bE.Templates||{};bG=E.AsyncBody=E.AsyncBody||{};bH=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bI=E.CT=E.CT||{};bJ=a.ADataSet;bK=bn.ChartConfig=bn.ChartConfig||{};bL=bn.SeriesChartConfig=bn.SeriesChartConfig||{};bM=bn.ColorConfig=bn.ColorConfig||{};bN=a.StartupCode$WebSharper_Charting$Renderers=a.StartupCode$WebSharper_Charting$Renderers||{};bO=_1.Reactive=_1.Reactive||{};bP=a.StartupCode$WebSharper_Charting$Charts=a.StartupCode$WebSharper_Charting$Charts||{};bQ=a.Options;bR=bn.PieChart=bn.PieChart||{};bS=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bT=_.BalancedTree=_.BalancedTree||{};bU=bT.Tree=bT.Tree||{};bV=_.Pair=_.Pair||{};bW=_.DictionaryUtil=_.DictionaryUtil||{};bX=a.Error;bY=e.OperationCanceledException=e.OperationCanceledException||{};bZ=e.CancellationTokenSource=e.CancellationTokenSource||{};b0=g.HtmlModule=g.HtmlModule||{};b1=b0.attr=b0.attr||{};b2=g.AttrModule=g.AttrModule||{};b3=a.Element;b4=a.HTMLElement;b5=e.Slice=e.Slice||{};b6=bp.Color=bp.Color||{};b7=bm.BatchUpdater=bm.BatchUpdater||{};b8=e.Util=e.Util||{};b9=bn.PolarData=bn.PolarData||{};b_=g.DocElemNode=g.DocElemNode||{};b$=a.CharacterData;ca=_.MapUtil=_.MapUtil||{};cb=N.PathUtil=N.PathUtil||{};cc=a.Blob;cd=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};ce=bF.Prepare=bF.Prepare||{};cf=g.DomUtility=g.DomUtility||{};cg=g.Elt=g.Elt||{};ch=g.An=g.An||{};ci=bE.Settings=bE.Settings||{};cj=_7.Mailbox=_7.Mailbox||{};ck=g.AttrProxy=g.AttrProxy||{};cl=g.Attrs=g.Attrs||{};cm=bE.Attrs=bE.Attrs||{};cn=cm.Dyn=cm.Dyn||{};co=S.Attribute=S.Attribute||{};cp=S.Event=S.Event||{};cq=S.AfterRender=S.AfterRender||{};cr=S.AfterRenderQ=S.AfterRenderQ||{};cs=g.Array=g.Array||{};ct=g.Updates=g.Updates||{};cu=_.ValueCollection=_.ValueCollection||{};cv=bE.Docs=bE.Docs||{};cw=cv.RunState=cv.RunState||{};cx=cv.NodeSet=cv.NodeSet||{};cy=g.Anims=g.Anims||{};cz=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};cA=e.Queue=e.Queue||{};cB=_.KeyCollection=_.KeyCollection||{};cC=_.HashSetUtil=_.HashSetUtil||{};cD=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};cE=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};cF=g.AppendList=g.AppendList||{};cG=e.KeyNotFoundException=e.KeyNotFoundException||{};cH=g.DynamicAttrNode=g.DynamicAttrNode||{};cI=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};cJ=g.Easing=g.Easing||{};cK=_7.HashSet=_7.HashSet||{};cL=g.BindVar=g.BindVar||{};cM=g.String=g.String||{};cN=g.CheckedInput=g.CheckedInput||{};cO=cv.DomNodes=cv.DomNodes||{};cP=e.Char=e.Char||{};cQ=e.DateUtil=e.DateUtil||{};cR=e.Lazy=e.Lazy||{};cS=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};cT=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};cU=cT.LazyRecord=cT.LazyRecord||{};cV=e&&e.Runtime;cW=a.Math;cX=a.JSON;cY=a.console;cZ=a.Date;c.Main=function(){d.$cctor();return d.Main;};c.router=function(){d.$cctor();return d.router;};c.currentPage=function(){d.$cctor();return d.currentPage;};d.$cctor=function(){var c0,c1,c2,c3,c4,c5,c6;d.$cctor=a.ignore;d.categoryIncome=h.Create$1("");d.amountIncome=h.Create$1(0);d.totalIncome=h.Create$1(0);d.categoryExpenses=h.Create$1("");d.amountExpenses=h.Create$1(0);d.totalExpenses=h.Create$1(0);d.incomeData=h.Create$1([j.Empty,j.Empty]);d.expenseData=h.Create$1([j.Empty,j.Empty]);d.stockName=h.Create$1("");d.stockAmount=h.Create$1(0);d.stockPrice=h.Create$1(0);d.stockData=i.ofArray([l.New("Apple",1.1,189,k.randomStockLastPrice(189)),l.New("Alphabet",1.1,170,k.randomStockLastPrice(170)),l.New("Microsoft",1.3,416,k.randomStockLastPrice(416))]);d.stockModel=(c0=m.Create(function(c7){return c7.Name;},k.loadStockData()),(o.Sink(function(c7){k.saveStockData(i.ofSeq(c7));},c0.v),c0));d.router=p.r();d.currentPage=r.InstallHash({$:0},c.router());d.Main=(c1=(c2=_6.EmbedView(o.Map(function(c7){return c7.$==1?k.StockPage():k.MoneyPage();},c.currentPage().get_View())),(c3=(c4=(c5=new w.New$1(),(c5.h.push(new U.New("tomoneypage","/#/")),c5)),(c4.h.push(new U.New("tostockpage","/#/stockPortfolio")),c4)),(c3.h.push(new T.New("pagecontent",c2)),c3))),(c6=_0.CompleteHoles(c1.k,c1.h,[]),c1.i=new R.New(c6[1],bF.RunFullDocTemplate(c6[0]))));};f=e.Obj=cV.Class({Equals:function(c0){return this===c0;},GetHashCode:function(){return -1;}},null,f);f.New=cV.Ctor(function(){},f);h=g.Var$1=cV.Class({},f,h);h.Create$1=function(c0){return new z.New(false,A.New({$:2,$0:c0,$1:[]}),c0);};j=i.T=cV.Class({GetEnumerator:function(){return new bt.New(this,null,function(c0){var c1;c1=c0.s;return c1.$==0?false:(c0.c=c1.$0,c0.s=c1.$1,true);},void 0);}},null,j);j.Empty=new j({$:0});i.ofArray=function(c0){var c1,c2,c3;c1=j.Empty;for(c2=s.length(c0)-1,c3=0;c2>=c3;c2--)c1=new j({$:1,$0:s.get(c0,c2),$1:c1});return c1;};i.ofSeq=function(c0){var c1,c2,c3,c4,c5,c6;if(c0 instanceof j)return c0;else if(c0 instanceof a.Array)return i.ofArray(c0);else{c1=M.Get(c0);try{c3=c1.MoveNext();if(!c3)c2=j.Empty;else{c5=new j({$:1});c4=c5;while(c3){c4.$0=c1.Current();if(c1.MoveNext())c4=(c6=new j({$:1}),c4.$1=c6,c6);else c3=false;}c4.$1=j.Empty;c2=c5;}return c2;}finally{if(typeof c1=="object"&&"Dispose"in c1)c1.Dispose();}}};i.map=function(c0,c1){var c2,c3,c4,c5,c6;if(c1.$==0)return c1;else{c5=new j({$:1});c2=c5;c3=c1;c4=true;while(c4){c2.$0=c0(c3.$0);c3=c3.$1;if(c3.$==0)c4=false;else c2=(c6=new j({$:1}),c2.$1=c6,c6);}c2.$1=j.Empty;return c5;}};i.iter=function(c0,c1){var c2;c2=c1;while(c2.$==1){c0(i.head(c2));c2=i.tail(c2);}};i.init=function(c0,c1){return i.ofArray(s.init(c0,c1));};i.rev=function(c0){var c1,c2;c1=j.Empty;c2=c0;while(c2.$==1){c1=new j({$:1,$0:c2.$0,$1:c1});c2=c2.$1;}return c1;};i.zip=function(c0,c1){return i.map2(function(c2,c3){return[c2,c3];},c0,c1);};i.append=function(c0,c1){var c2,c3,c4,c5,c6;if(c0.$==0)return c1;else if(c1.$==0)return c0;else{c5=new j({$:1});c2=c5;c3=c0;c4=true;while(c4){c2.$0=c3.$0;c3=c3.$1;if(c3.$==0)c4=false;else c2=(c6=new j({$:1}),c2.$1=c6,c6);}c2.$1=c1;return c5;}};i.map2=function(c0,c1,c2){var c3,c4,c5,c6,c7,c8;c3=c1.$==1&&c2.$==1;if(!c3)return c1.$==1||c2.$==1?i.badLengths():c1;else{c7=new j({$:1});c4=c7;c5=c1;c6=c2;while(c3){c4.$0=c0(c5.$0,c6.$0);c5=c5.$1;c6=c6.$1;if(c5.$==1&&c6.$==1)c4=(c8=new j({$:1}),c4.$1=c8,c8);else c3=false;}if(c5.$==1||c6.$==1)i.badLengths();c4.$1=j.Empty;return c7;}};i.head=function(c0){return c0.$==1?c0.$0:i.listEmpty();};i.tail=function(c0){return c0.$==1?c0.$1:i.listEmpty();};i.badLengths=function(){return n.FailWith("The lists have different lengths.");};i.listEmpty=function(){return n.FailWith("The input list was empty.");};l.New=function(c0,c1,c2,c3){return{Name:c0,Amount:c1,Price:c2,LastPrice:c3};};k.randomStockLastPrice=function(c0){return 20*(new B.New(),cW.random())+(c0-10);};k.saveStockData=function(c0){var c1;c1=cX.stringify(((K.EncodeList(K.Id()))())(c0));self.localStorage.setItem("stocks",c1);};k.loadStockData=function(){var c0;c0=self.localStorage.getItem("stocks");if(c0==null)return k.stockData();else try{return i.map(function(c1){return l.New(c1.Name,c1.Amount,c1.Price,k.randomStockLastPrice(c1.Price));},((K.DecodeList(K.Id()))())(cX.parse(c0)));}catch(c1){return k.stockData();}};k.StockPage=function(){var c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl;k.startUpdatingLastPrices();c0=o.Map(function(dm){return D.sumBy(function(dn){return dn.LastPrice*dn.Amount;},dm);},k.stockModel().v);c1=new Z.New();c2=_3.Render$8(_4.Line(c1.event),{$:1,$0:{$:0,$0:1400,$1:300}},null,{$:1,$0:10});E.Start((c3=null,E.Delay(function(){return E.While(function(){return true;},E.Delay(function(){return E.Bind(E.Sleep(3000),function(){return E.Bind(o.GetAsync(c0),function(dm){c1.event.Trigger(dm);return E.Zero();});});}));})),null);c4=o.Map(function(dm){return D.sumBy(function(dn){return dn.LastPrice*dn.Amount-dn.Price*dn.Amount;},dm);},k.stockModel().v);return(c5=(c6=(c7=(c8=o.Map(function(dm){return dm>=0?"rgb(0, 210, 0)":"red";},c4),(c9=(c_=o.Map(function(dm){return dm.toFixed(2);},o.Map2(function(dm,dn){return dn*100/dm;},c0,c4)),(c$=(da=o.Map(function(dm){return dm.toFixed(2)+"$";},c4),(db=(dc=o.Map(function(dm){return dm.toFixed(2)+"$";},c0),(dd=(de=(df=(dg=(dh=_6.Convert(function(dm){var dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH;function dI(dJ){return dJ.toFixed(2);}dn=dm.Amount*dm.Price;_do=dm.LastPrice*dm.Amount;dp=_do-dn;return(dq=(dr=(ds=dI(_do),(dt=(du=dI(dn),(dv=(dw=dI(dp),(dx=(dy=(dz=dI(dm.LastPrice),(dA=(dB=dI(dm.Price),(dC=(dD=dI(dm.Amount),(dE=(dF=new w.New$1(),(dF.h.push(new U.New("stockname",dm.Name)),dF)),(dE.h.push(new U.New("stockamount",dD)),dE))),(dC.h.push(new U.New("stockprice",dB)),dC))),(dA.h.push(new U.New("stocklast",dz)),dA))),(dy.h.push(new U.New("color",dp>=0?"rgb(0, 210, 0)":"red")),dy)),(dx.h.push(new U.New("stockprofitandloss",dw)),dx))),(dv.h.push(new U.New("stockcostbasis",du)),dv))),(dt.h.push(new U.New("stockmarketvalue",ds)),dt))),(dr.h.push(_0.EventQ2(dr.k,"remove",function(){return dr.i;},function(){k.stockModel().RemoveByKey(dm.Name);})),dr)),(dG=_0.CompleteHoles(dq.k,dq.h,[]),(dH=new R.New(dG[1],q.stocklist(dG[0])),dq.i=dH,dH))).get_Doc();},k.stockModel().v),(di=(dj=new w.New$1(),(dj.h.push(new U.New("headerspa","Stock Portfolio")),dj)),(di.h.push(new T.New("stocktablebody",dh)),di))),(dg.h.push(new bi.New("stockname",k.stockName())),dg)),(df.h.push(new bh.New("stockamount",k.stockAmount())),df)),(de.h.push(new bh.New("stockprice",k.stockPrice())),de)),(dd.h.push(new bg.New("assetamount",dc)),dd))),(db.h.push(new bg.New("assetprofitandloss",da)),db))),(c$.h.push(new bg.New("assetprofitandlosspercent",c_)),c$))),(c9.h.push(new bg.New("colorprofitandloss",c8)),c9))),(c7.h.push(_0.EventQ2(c7.k,"add",function(){return c7.i;},function(){var dm;if(k.stockName().Get()!=""&&k.stockAmount().Get()>0&&k.stockPrice().Get()>0){dm=l.New(k.capitalize(k.stockName().Get()),k.stockAmount().Get(),k.stockPrice().Get(),k.randomStockLastPrice(k.stockPrice().Get()));k.stockModel().Append(dm);k.stockName().Set("");k.stockAmount().Set(0);k.stockPrice().Set(0);}else k.emptyAlert();})),c7)),(c6.h.push(new T.New("assetchart",c2)),c6)),(dk=_0.CompleteHoles(c5.k,c5.h,[["stockname",0,null],["stockamount",1,null],["stockprice",1,null]]),(dl=new R.New(dk[1],q.stockportfolio(dk[0])),c5.i=dl,dl))).get_Doc();};k.MoneyPage=function(){var c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm;function dn(){var dp;k.totalIncome().Set(k.totalIncome().Get()+k.amountIncome().Get());dp=k.incomeData().Get();k.incomeData().Set([i.append(dp[0],i.ofArray([k.categoryIncome().Get()])),i.append(dp[1],i.ofArray([k.amountIncome().Get()]))]);k.categoryIncome().Set("");k.amountIncome().Set(0);}function _do(){var dp;k.totalExpenses().Set(k.totalExpenses().Get()+k.amountExpenses().Get());dp=k.expenseData().Get();k.expenseData().Set([i.append(dp[0],i.ofArray([k.categoryExpenses().Get()])),i.append(dp[1],i.ofArray([k.amountExpenses().Get()]))]);k.categoryExpenses().Set("");k.amountExpenses().Set(0);}c0=o.Map2(function(dp,dq){return(dp-dq).toFixed(2);},k.totalIncome().get_View(),k.totalExpenses().get_View());c1=o.Map(function(dp){return dp.toFixed(2);},k.totalIncome().get_View());c2=o.Map(function(dp){return dp.toFixed(2);},k.totalExpenses().get_View());c3=o.Map2(_5.createPieChart,o.Map(function(dp){return dp[0];},k.incomeData().get_View()),o.Map(function(dp){return dp[1];},k.incomeData().get_View()));c4=o.Map2(_5.createPieChart,o.Map(function(dp){return dp[0];},k.expenseData().get_View()),o.Map(function(dp){return dp[1];},k.expenseData().get_View()));c5=o.Map2(function(dp,dq){return _5.createBalanceChart(a.Number(dp),a.Number(dq));},c1,c2);return(c6=(c7=(c8=(c9=_6.EmbedView(c3),(c_=(c$=(da=_6.EmbedView(c4),(db=(dc=(dd=_6.EmbedView(c5),(de=(df=(dg=(dh=(di=(dj=(dk=new w.New$1(),(dk.h.push(new U.New("headerspa","Money Tracking")),dk)),(dj.h.push(new bi.New("categoryincome",k.categoryIncome())),dj)),(di.h.push(new bh.New("amountincome",k.amountIncome())),di)),(dh.h.push(new bi.New("categoryexpenses",k.categoryExpenses())),dh)),(dg.h.push(new bh.New("amountexpenses",k.amountExpenses())),dg)),(df.h.push(new bg.New("balance",c0)),df)),(de.h.push(new T.New("balancechart",dd)),de))),(dc.h.push(new bg.New("expenses",c2)),dc)),(db.h.push(new T.New("expenseschart",da)),db))),(c$.h.push(new bg.New("income",c1)),c$)),(c_.h.push(new T.New("incomechart",c9)),c_))),(c8.h.push(_0.EventQ2(c8.k,"addincome",function(){return c8.i;},function(){if(k.categoryIncome().Get()!=""&&k.amountIncome().Get()!==0)dn();else k.emptyAlert();})),c8)),(c7.h.push(_0.EventQ2(c7.k,"addexpense",function(){return c7.i;},function(){if(k.categoryExpenses().Get()!=""&&k.amountExpenses().Get()!==0)_do();else k.emptyAlert();})),c7)),(dl=_0.CompleteHoles(c6.k,c6.h,[["categoryincome",0,null],["amountincome",1,null],["categoryexpenses",0,null],["amountexpenses",1,null]]),(dm=new R.New(dl[1],q.moneytracking(dl[0])),c6.i=dm,dm))).get_Doc();};k.stockData=function(){d.$cctor();return d.stockData;};k.startUpdatingLastPrices=function(){var c0;E.Start((c0=null,E.Delay(function(){return E.While(function(){return true;},E.Delay(function(){return E.Bind(E.Sleep(3000),function(){k.updateLastPrices();return E.Zero();});}));})),null);};k.stockModel=function(){d.$cctor();return d.stockModel;};k.stockPrice=function(){d.$cctor();return d.stockPrice;};k.stockAmount=function(){d.$cctor();return d.stockAmount;};k.stockName=function(){d.$cctor();return d.stockName;};k.capitalize=function(c0){var c1;return(c1=c0[0],a.String(c1)).toUpperCase()+c0.substring(1).toLowerCase();};k.emptyAlert=function(){a.alert("Field can not be left empty.");};k.totalIncome=function(){d.$cctor();return d.totalIncome;};k.totalExpenses=function(){d.$cctor();return d.totalExpenses;};k.amountExpenses=function(){d.$cctor();return d.amountExpenses;};k.categoryExpenses=function(){d.$cctor();return d.categoryExpenses;};k.amountIncome=function(){d.$cctor();return d.amountIncome;};k.categoryIncome=function(){d.$cctor();return d.categoryIncome;};k.expenseData=function(){d.$cctor();return d.expenseData;};k.incomeData=function(){d.$cctor();return d.incomeData;};k.updateLastPrices=function(){k.stockModel().Iter(function(c0){var c1;c1=k.randomStockLastPrice(c0.Price);c0.LastPrice=c1;k.stockModel().UpdateBy(function(c2){return{$:1,$0:l.New(c2.Name,c2.Amount,c2.Price,c1)};},c0.Name);});};m.Create=function(c0,c1){return m.CreateWithStorage(c0,C.InMemory(s.ofSeq(c1)));};m.CreateWithStorage=function(c0,c1){return new m.New(c0,c1);};n.FailWith=function(c0){throw new bX(c0);};n.KeyValue=function(c0){return[c0.K,c0.V];};n.range=function(c0,c1){var c2;c2=1+c1-c0;return c2<=0?[]:D.init(c2,function(c3){return c3+c0;});};m=g.ListModel=cV.Class({RemoveByKey:function(c0){var c1;c1=this;this["var"].Set(this.storage.SRemoveIf(function(c2){return V.Equals(c1.key(c2),c0);},this["var"].Get()));this.ObsoleteKey(c0);},ObsoleteKey:function(c0){var c1,c2;c1=(c2=null,[this.it.TryGetValue(c0,{get:function(){return c2;},set:function(c3){c2=c3;}}),c2]);if(c1[0]){A.Obsolete(c1[1]);this.it.RemoveKey(c0);}},Append:function(c0){var c1,c2,c3,c4;c1=this;c2=this["var"].Get();c3=this.key(c0);c4=s.tryFindIndex(function(c5){return V.Equals(c1.key(c5),c3);},c2);if(c4!=null&&c4.$==1)this["var"].Set(this.storage.SSetAt(c4.$0,c0,c2));else this["var"].Set(this.storage.SAppend(c0,c2));this.ObsoleteKey(c3);},Iter:function(c0){s.iter(c0,this["var"].Get());},UpdateBy:function(c0,c1){var c2,c3,c4,c5,c6;c2=this;c3=this["var"].Get();c4=s.tryFindIndex(function(c7){return V.Equals(c2.key(c7),c1);},c3);if(c4!=null&&c4.$==1){c5=c4.$0;c6=c0(s.get(c3,c5));c6!=null&&c6.$==1?(this["var"].Set(this.storage.SSetAt(c5,c6.$0,c3)),this.ObsoleteKey(c1)):void 0;}},GetEnumerator:function(){return M.Get(this["var"].Get());},GetEnumerator0:function(){return M.Get0(this["var"].Get());}},f,m);m.New=cV.Ctor(function(c0,c1){m.New$3.call(this,c0,h.Create$1(s.ofSeq(D.distinctBy(c0,c1.SInit()))),c1);},m);m.New$3=cV.Ctor(function(c0,c1,c2){f.New.call(this);this.key=c0;this["var"]=c1;this.storage=c2;this.v=o.Map(function(c3){return c3.slice();},this["var"].get_View());this.it=new $.New$5();},m);o.Sink=function(c0,c1){function c2(){A.WhenRun(c1(),c0,function(){E.scheduler().Fork(c2);});}E.scheduler().Fork(c2);};o.Map=function(c0,c1){return o.CreateLazy(function(){return A.Map(c0,c1());});};o.Map2=function(c0,c1,c2){return o.CreateLazy(function(){return A.Map2(c0,c1(),c2());});};o.GetAsync=function(c0){return E.FromContinuations(function(c1){return o.Get(c1,c0);});};o.CreateLazy=function(c0){var c1;c1={c:null,o:c0};return function(){var c2,c3;c2=c1.c;return c2===null?(c2=c1.o(),c1.c=c2,(c3=c2.s,c3!=null&&c3.$==0)?c1.o=null:A.WhenObsoleteRun(c2,function(){c1.c=null;}),c2):c2;};};o.Get=function(c0,c1){var c2;function c3(){A.WhenRun(c1(),function(c4){if(!c2[0]){c2[0]=true;c0(c4);}},function(){if(!c2[0])c3();});}c2=[false];c3();};o.Bind=function(c0,c1){return o.Join(o.Map(c0,c1));};o.Join=function(c0){return o.CreateLazy(function(){return A.Join(c0());});};o.MapSeqCached=function(c0,c1){return o.MapSeqCachedBy(a.id,c0,c1);};o.MapSeqCachedBy=function(c0,c1,c2){var c3;c3=[new $.New$5()];return o.Map(function(c4){var c5,c6,c7;c5=c3[0];c6=new $.New$5();c7=cs.mapInPlace(function(c8){var c9,c_;c9=c0(c8);c_=c5.ContainsKey(c9)?c5.Item(c9):c1(c8);c6.set_Item(c9,c_);return c_;},s.ofSeq(c4));c3[0]=c6;return c7;},c2);};o.Const=function(c0){var c1;c1=A.New({$:0,$0:c0});return function(){return c1;};};o.Map3=function(c0,c1,c2,c3){return o.CreateLazy(function(){return A.Map3(c0,c1(),c2(),c3());});};o.Sequence=function(c0){return o.CreateLazy(function(){return A.Sequence(D.map(function(c1){return c1();},c0));});};o.Map2Unit=function(c0,c1){return o.CreateLazy(function(){return A.Map2Unit(c0(),c1());});};p.r=function(){return O.JSUnion(void 0,[[null,[[null,[]]],[]],[null,[[null,["stockPortfolio"]]],[]]]);};q.stocklist=function(c0){bF.LoadLocalTemplates("index");return c0?bF.NamedTemplate("index",{$:1,$0:"stocklist"},c0):void 0;};q.stockportfolio=function(c0){bF.LoadLocalTemplates("index");return c0?bF.NamedTemplate("index",{$:1,$0:"stockportfolio"},c0):void 0;};q.moneytracking=function(c0){bF.LoadLocalTemplates("index");return c0?bF.NamedTemplate("index",{$:1,$0:"moneytracking"},c0):void 0;};r.InstallHash=function(c0,c1){var c2;c2=h.Create$1(void 0);r.InstallHashInto(c2,c0,c1);return c2;};r.InstallHashInto=function(c0,c1,c2){function c3(c6){return P.Parse(c2,Q.FromHash(c6,{$:1,$0:true}));}function c4(){return r.getCurrentHash(c3,c1);}function c5(c6){if(!V.Equals(c0.Get(),c6))c0.Set(c6);}c5(c4());self.addEventListener("popstate",function(){return c5(c4());},false);self.addEventListener("hashchange",function(){return c5(c4());},false);self.document.body.addEventListener("click",function(c6){var c7,c8,c9;c7=(c8=r.findLinkHref(c6.target),c8==null?null:(c9=c8.$0,bw.StartsWith(c9,"#")?c3(c9):null));return c7==null?null:(c5(c7.$0),c6.preventDefault());},false);o.Sink(function(c6){var c7;if(!V.Equals(c6,c4())){c7=P.HashLink(c2,c6);self.history.pushState(null,null,c7);}},c0.get_View());};r.getCurrentHash=function(c0,c1){var c2,c3;c2=self.location.hash;c3=c0(c2);return c3==null?((function(c4){return function(c5){return c4("Failed to parse route: "+bx.toSafe(c5));};}(function(c4){cY.log(c4);}))(c2),c1):c3.$0;};r.findLinkHref=function(c0){while(true)if(c0.tagName=="A")return bd.ofObj(c0.getAttribute("href"));else if(c0===self.document.body)return null;else c0=c0.parentNode;};s.get=function(c0,c1){s.checkBounds(c0,c1);return c0[c1];};s.length=function(c0){return c0.dims===2?c0.length*c0.length:c0.length;};s.checkBounds=function(c0,c1){if(c1<0||c1>=c0.length)n.FailWith("Index was outside the bounds of the array.");};s.set=function(c0,c1,c2){s.checkBounds(c0,c1);c0[c1]=c2;};w=v.ProviderBuilder=cV.Class({},f,w);w.New$1=cV.Ctor(function(){var c0;f.New.call(this);this.i=null;this.k=(c0=X.NewGuid(),a.String(c0));this.h=cV.MarkResizable([]);cV.SetOptional(this,"s",null);},w);x=g.TemplateHole=cV.Class({ForTextView:function(){cY.warn("Content hole filled with attribute data",this.get_Name());return null;},AddAttribute:function(c0,c1){cY.warn("Var hole filled with non-Var data",this.get_Name());},get_AsChoiceView:function(){cY.warn("Attribute value hole filled with non-text data",this.get_Name());return{$:0,$0:""};}},f,x);x.New=cV.Ctor(function(){f.New.call(this);},x);o=g.View=cV.Class({get_V:function(){return n.FailWith("View<'T>.V can only be called in an argument to a V-enabled function or if 'T = Doc.");}},null,o);y=g.Var=cV.Class({},f,y);y.New=cV.Ctor(function(){f.New.call(this);},y);z=g.ConcreteVar=cV.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(c0){if(this.isConst)(function(c1){return c1("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(c1){cY.log(c1);}));else{A.Obsolete(this.snap);this.current=c0;this.snap=A.New({$:2,$0:c0,$1:[]});}},SetFinal:function(c0){if(this.isConst)(function(c1){return c1("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(c1){cY.log(c1);}));else{A.Obsolete(this.snap);this.isConst=true;this.current=c0;this.snap=A.New({$:0,$0:c0});}},UpdateMaybe:function(c0){var c1;c1=c0(this.Get());if(c1!=null&&c1.$==1)this.Set(c1.$0);}},y,z);z.New=cV.Ctor(function(c0,c1,c2){var c3;c3=this;y.New.call(this);this.isConst=c0;this.current=c2;this.snap=c1;this.view=function(){return c3.snap;};this.id=_8.Int();},z);A.WhenRun=function(c0,c1,c2){var c3;c3=c0.s;if(c3==null)c2();else c3!=null&&c3.$==2?(c3.$1.push(c2),c1(c3.$0)):c3!=null&&c3.$==3?(c3.$0.push(c1),c3.$1.push(c2)):c1(c3.$0);};A.Map=function(c0,c1){var c2,c3;c2=c1.s;return c2!=null&&c2.$==0?A.New({$:0,$0:c0(c2.$0)}):(c3=A.New({$:3,$0:[],$1:[]}),(A.When(c1,function(c4){A.MarkDone(c3,c1,c0(c4));},c3),c3));};A.Map2=function(c0,c1,c2){var c3,c4,c5;function c6(c7){var c8,c9,c_;if(!(c8=c5.s,c8!=null&&c8.$==0||c8!=null&&c8.$==2)){c9=A.ValueAndForever(c1);c_=A.ValueAndForever(c2);if(c9!=null&&c9.$==1)c_!=null&&c_.$==1?c9.$0[1]&&c_.$0[1]?A.MarkForever(c5,c0(c9.$0[0],c_.$0[0])):A.MarkReady(c5,c0(c9.$0[0],c_.$0[0])):void 0;}}c3=c1.s;c4=c2.s;return c3!=null&&c3.$==0?c4!=null&&c4.$==0?A.New({$:0,$0:c0(c3.$0,c4.$0)}):A.Map2Opt1(c0,c3.$0,c2):c4!=null&&c4.$==0?A.Map2Opt2(c0,c4.$0,c1):(c5=A.New({$:3,$0:[],$1:[]}),(A.When(c1,c6,c5),A.When(c2,c6,c5),c5));};A.WhenObsoleteRun=function(c0,c1){var c2;c2=c0.s;if(c2==null)c1();else c2!=null&&c2.$==2?c2.$1.push(c1):c2!=null&&c2.$==3?c2.$1.push(c1):void 0;};A.When=function(c0,c1,c2){var c3;c3=c0.s;if(c3==null)A.Obsolete(c2);else c3!=null&&c3.$==2?(A.EnqueueSafe(c3.$1,c2),c1(c3.$0)):c3!=null&&c3.$==3?(c3.$0.push(c1),A.EnqueueSafe(c3.$1,c2)):c1(c3.$0);};A.MarkDone=function(c0,c1,c2){var c3;if(c3=c1.s,c3!=null&&c3.$==0)A.MarkForever(c0,c2);else A.MarkReady(c0,c2);};A.Map2Opt1=function(c0,c1,c2){return A.Map(function(c3){return c0(c1,c3);},c2);};A.Map2Opt2=function(c0,c1,c2){return A.Map(function(c3){return c0(c3,c1);},c2);};A.ValueAndForever=function(c0){var c1;c1=c0.s;return c1!=null&&c1.$==0?{$:1,$0:[c1.$0,true]}:c1!=null&&c1.$==2?{$:1,$0:[c1.$0,false]}:null;};A.MarkForever=function(c0,c1){var c2,c3,c4,c5;c2=c0.s;if(c2!=null&&c2.$==3){c0.s={$:0,$0:c1};c3=c2.$0;for(c4=0,c5=s.length(c3)-1;c4<=c5;c4++)(s.get(c3,c4))(c1);}else void 0;};A.MarkReady=function(c0,c1){var c2,c3,c4,c5;c2=c0.s;if(c2!=null&&c2.$==3){c0.s={$:2,$0:c1,$1:c2.$1};c3=c2.$0;for(c4=0,c5=s.length(c3)-1;c4<=c5;c4++)(s.get(c3,c4))(c1);}else void 0;};A.EnqueueSafe=function(c0,c1){var c2,c3,c4,c5;c0.push(c1);if(c0.length%20===0){c2=c0.slice(0);cA.Clear(c0);for(c3=0,c4=s.length(c2)-1;c3<=c4;c3++){c5=s.get(c2,c3);if(typeof c5=="object")(function(c6){if(c6.s)c0.push(c6);}(c5));else(function(c6){c0.push(c6);}(c5));}}else void 0;};A.Join=function(c0){var c1;c1=A.New({$:3,$0:[],$1:[]});A.When(c0,function(c2){var c3;c3=c2();A.When(c3,function(c4){var c5,c6;if((c5=c3.s,c5!=null&&c5.$==0)&&(c6=c0.s,c6!=null&&c6.$==0))A.MarkForever(c1,c4);else A.MarkReady(c1,c4);},c1);},c1);return c1;};A.Map3=function(c0,c1,c2,c3){var c4,c5,c6,c7;function c8(c9){var c_,c$,da,db;if(!(c_=c7.s,c_!=null&&c_.$==0||c_!=null&&c_.$==2)){c$=A.ValueAndForever(c1);da=A.ValueAndForever(c2);db=A.ValueAndForever(c3);if(c$!=null&&c$.$==1)da!=null&&da.$==1?db!=null&&db.$==1?c$.$0[1]&&da.$0[1]&&db.$0[1]?A.MarkForever(c7,c0(c$.$0[0],da.$0[0],db.$0[0])):A.MarkReady(c7,c0(c$.$0[0],da.$0[0],db.$0[0])):void 0:void 0;}}c4=c1.s;c5=c2.s;c6=c3.s;return c4!=null&&c4.$==0?c5!=null&&c5.$==0?c6!=null&&c6.$==0?A.New({$:0,$0:c0(c4.$0,c5.$0,c6.$0)}):A.Map3Opt1(c0,c4.$0,c5.$0,c3):c6!=null&&c6.$==0?A.Map3Opt2(c0,c4.$0,c6.$0,c2):A.Map3Opt3(c0,c4.$0,c2,c3):c5!=null&&c5.$==0?c6!=null&&c6.$==0?A.Map3Opt4(c0,c5.$0,c6.$0,c1):A.Map3Opt5(c0,c5.$0,c1,c3):c6!=null&&c6.$==0?A.Map3Opt6(c0,c6.$0,c1,c2):(c7=A.New({$:3,$0:[],$1:[]}),(A.When(c1,c8,c7),A.When(c2,c8,c7),A.When(c3,c8,c7),c7));};A.Sequence=function(c0){var c1,c2,c3;function c4(c5){var c6;if(c3[0]===0){c6=s.map(function(c7){var c8;c8=c7.s;return c8!=null&&c8.$==0?c8.$0:c8!=null&&c8.$==2?c8.$0:n.FailWith("value not found by View.Sequence");},c1);if(s.forall(function(c7){var c8;c8=c7.s;return c8!=null&&c8.$==0;},c1))A.MarkForever(c2,c6);else A.MarkReady(c2,c6);}else c3[0]=c3[0]-1;}c1=s.ofSeq(c0);return c1.length==0?A.New({$:0,$0:[]}):(c2=A.New({$:3,$0:[],$1:[]}),(c3=[s.length(c1)-1],(s.iter(function(c5){A.When(c5,c4,c2);},c1),c2)));};A.Map2Unit=function(c0,c1){var c2,c3,c4;function c5(){var c6,c7,c8;if(!(c6=c4.s,c6!=null&&c6.$==0||c6!=null&&c6.$==2)){c7=A.ValueAndForever(c0);c8=A.ValueAndForever(c1);if(c7!=null&&c7.$==1)c8!=null&&c8.$==1?c7.$0[1]&&c8.$0[1]?A.MarkForever(c4,null):A.MarkReady(c4,null):void 0;}}c2=c0.s;c3=c1.s;return c2!=null&&c2.$==0?c3!=null&&c3.$==0?A.New({$:0,$0:null}):c1:c3!=null&&c3.$==0?c0:(c4=A.New({$:3,$0:[],$1:[]}),(A.When(c0,c5,c4),A.When(c1,c5,c4),c4));};A.Copy=function(c0){var c1,c2,c3;c1=c0.s;return c1==null?c0:c1!=null&&c1.$==2?(c2=A.New({$:2,$0:c1.$0,$1:[]}),(A.WhenObsolete(c0,c2),c2)):c1!=null&&c1.$==3?(c3=A.New({$:3,$0:[],$1:[]}),(A.When(c0,function(c4){A.MarkDone(c3,c0,c4);},c3),c3)):c0;};A.Map3Opt1=function(c0,c1,c2,c3){return A.Map(function(c4){return c0(c1,c2,c4);},c3);};A.Map3Opt2=function(c0,c1,c2,c3){return A.Map(function(c4){return c0(c1,c4,c2);},c3);};A.Map3Opt3=function(c0,c1,c2,c3){return A.Map2(function(c4,c5){return c0(c1,c4,c5);},c2,c3);};A.Map3Opt4=function(c0,c1,c2,c3){return A.Map(function(c4){return c0(c4,c1,c2);},c3);};A.Map3Opt5=function(c0,c1,c2,c3){return A.Map2(function(c4,c5){return c0(c4,c1,c5);},c2,c3);};A.Map3Opt6=function(c0,c1,c2,c3){return A.Map2(function(c4,c5){return c0(c4,c5,c1);},c2,c3);};A.WhenObsolete=function(c0,c1){var c2;c2=c0.s;if(c2==null)A.Obsolete(c1);else c2!=null&&c2.$==2?A.EnqueueSafe(c2.$1,c1):c2!=null&&c2.$==3?A.EnqueueSafe(c2.$1,c1):void 0;};B=e.Random=cV.Class({Next:function(c0,c1){return c0>c1?n.FailWith("'minValue' cannot be greater than maxValue."):c0+cW.floor(cW.random()*(c1-c0));}},f,B);B.New=cV.Ctor(function(){f.New.call(this);},B);C.InMemory=function(c0){return new _9.New(c0);};D.sumBy=function(c0,c1){var c2,c3;c2=0;c3=M.Get(c1);try{while(c3.MoveNext())c2=c2+c0(c3.Current());}finally{if(typeof c3=="object"&&"Dispose"in c3)c3.Dispose();}return c2;};D.iteri=function(c0,c1){var c2,c3;c2=0;c3=M.Get(c1);try{while(c3.MoveNext()){c0(c2,c3.Current());c2=c2+1;}}finally{if(typeof c3=="object"&&"Dispose"in c3)c3.Dispose();}};D.collect=function(c0,c1){return D.concat(D.map(c0,c1));};D.append=function(c0,c1){return{GetEnumerator:function(){var c2,c3;c2=M.Get(c0);c3=[true];return new bt.New(c2,null,function(c4){var c5;return c4.s.MoveNext()?(c4.c=c4.s.Current(),true):(c5=c4.s,!V.Equals(c5,null)?c5.Dispose():void 0,c4.s=null,c3[0]&&(c3[0]=false,c4.s=M.Get(c1),c4.s.MoveNext()?(c4.c=c4.s.Current(),true):(c4.s.Dispose(),c4.s=null,false)));},function(c4){var c5;c5=c4.s;if(!V.Equals(c5,null))c5.Dispose();});}};};D.indexed=function(c0){return D.mapi(function(c1,c2){return[c1,c2];},c0);};D.map=function(c0,c1){return{GetEnumerator:function(){var c2;c2=M.Get(c1);return new bt.New(null,null,function(c3){return c2.MoveNext()&&(c3.c=c0(c2.Current()),true);},function(){c2.Dispose();});}};};D.tryFindIndex=function(c0,c1){var c2,c3,c4;c2=M.Get(c1);try{c3=true;c4=0;while(c3&&c2.MoveNext())if(c0(c2.Current()))c3=false;else c4=c4+1;return c3?null:{$:1,$0:c4};}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}};D.tryPick=function(c0,c1){var c2,c3;c2=M.Get(c1);try{c3=null;while(V.Equals(c3,null)&&c2.MoveNext())c3=c0(c2.Current());return c3;}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}};D.distinctBy=function(c0,c1){return{GetEnumerator:function(){var c2,c3;c2=M.Get(c1);c3=new by.New$3();return new bt.New(null,null,function(c4){var c5,c6;if(c2.MoveNext()){c5=c2.Current();c6=c3.SAdd(c0(c5));while(!c6&&c2.MoveNext()){c5=c2.Current();c6=c3.SAdd(c0(c5));}return c6&&(c4.c=c5,true);}else return false;},function(){c2.Dispose();});}};};D.concat=function(c0){return{GetEnumerator:function(){var c1;function c2(c3){var c4;while(true){c4=c3.s;if(V.Equals(c4,null)){if(c1.MoveNext()){c3.s=M.Get(c1.Current());c3=c3;}else{c1.Dispose();return false;}}else if(c4.MoveNext()){c3.c=c4.Current();return true;}else{c3.Dispose();c3.s=null;c3=c3;}}}c1=M.Get(c0);return new bt.New(null,null,c2,function(c3){var c4;c4=c3.s;if(!V.Equals(c4,null))c4.Dispose();if(!V.Equals(c1,null))c1.Dispose();});}};};D.mapi=function(c0,c1){return D.map2(c0,D.initInfinite(a.id),c1);};D.map2=function(c0,c1,c2){return{GetEnumerator:function(){var c3,c4;c3=M.Get(c1);c4=M.Get(c2);return new bt.New(null,null,function(c5){return c3.MoveNext()&&c4.MoveNext()&&(c5.c=c0(c3.Current(),c4.Current()),true);},function(){c3.Dispose();c4.Dispose();});}};};D.initInfinite=function(c0){return{GetEnumerator:function(){return new bt.New(0,null,function(c1){c1.c=c0(c1.s);c1.s=c1.s+1;return true;},void 0);}};};D.head=function(c0){var c1;c1=M.Get(c0);try{return c1.MoveNext()?c1.Current():D.insufficient();}finally{if(typeof c1=="object"&&"Dispose"in c1)c1.Dispose();}};D.forall2=function(c0,c1,c2){return!D.exists2(function(c3,c4){return!c0(c3,c4);},c1,c2);};D.rev=function(c0){return D.delay(function(){return s.ofSeq(c0).slice().reverse();});};D.fold=function(c0,c1,c2){var c3,c4;c3=c1;c4=M.Get(c2);try{while(c4.MoveNext())c3=c0(c3,c4.Current());return c3;}finally{if(typeof c4=="object"&&"Dispose"in c4)c4.Dispose();}};D.exists2=function(c0,c1,c2){var c3,c4,c5,c6;c3=M.Get(c1);try{c5=M.Get(c2);try{c6=false;while(!c6&&c3.MoveNext()&&c5.MoveNext())c6=c0(c3.Current(),c5.Current());c4=c6;}finally{if(typeof c5=="object"&&"Dispose"in c5)c5.Dispose();}return c4;}finally{if(typeof c3=="object"&&"Dispose"in c3)c3.Dispose();}};D.delay=function(c0){return{GetEnumerator:function(){return M.Get(c0());}};};D.distinct=function(c0){return D.distinctBy(a.id,c0);};D.iter=function(c0,c1){var c2;c2=M.Get(c1);try{while(c2.MoveNext())c0(c2.Current());}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}};D.unfold=function(c0,c1){return{GetEnumerator:function(){return new bt.New(c1,null,function(c2){var c3;c3=c0(c2.s);return c3==null?false:(c2.c=c3.$0[0],c2.s=c3.$0[1],true);},void 0);}};};D.max=function(c0){var c1,c2,c3;c1=M.Get(c0);try{if(!c1.MoveNext())D.seqEmpty();c2=c1.Current();while(c1.MoveNext()){c3=c1.Current();if(V.Compare(c3,c2)===1)c2=c3;}return c2;}finally{if(typeof c1=="object"&&"Dispose"in c1)c1.Dispose();}};D.init=function(c0,c1){return D.take(c0,D.initInfinite(c1));};D.seqEmpty=function(){return n.FailWith("The input sequence was empty.");};D.compareWith=function(c0,c1,c2){var c3,c4,c5,c6,c7;c3=M.Get(c1);try{c5=M.Get(c2);try{c6=0;c7=true;while(c7&&c6===0)if(c3.MoveNext())c6=c5.MoveNext()?c0(c3.Current(),c5.Current()):1;else if(c5.MoveNext())c6=-1;else c7=false;c4=c6;}finally{if(typeof c5=="object"&&"Dispose"in c5)c5.Dispose();}return c4;}finally{if(typeof c3=="object"&&"Dispose"in c3)c3.Dispose();}};D.forall=function(c0,c1){return!D.exists(function(c2){return!c0(c2);},c1);};D.take=function(c0,c1){c0<0?D.nonNegative():void 0;return{GetEnumerator:function(){var c2;c2=[M.Get(c1)];return new bt.New(0,null,function(c3){var c4;c3.s=c3.s+1;return c3.s>c0?false:(c4=c2[0],V.Equals(c4,null)?D.insufficient():c4.MoveNext()?(c3.c=c4.Current(),c3.s===c0?(c4.Dispose(),c2[0]=null):void 0,true):(c4.Dispose(),c2[0]=null,D.insufficient()));},function(){var c3;c3=c2[0];if(!V.Equals(c3,null))c3.Dispose();});}};};D.exists=function(c0,c1){var c2,c3;c2=M.Get(c1);try{c3=false;while(!c3&&c2.MoveNext())c3=c0(c2.Current());return c3;}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}};E.Delay=function(c0){return function(c1){try{(c0(null))(c1);}catch(c2){c1.k({$:1,$0:c2});}};};E.While=function(c0,c1){return c0()?E.Bind(c1,function(){return E.While(c0,c1);}):E.Return();};E.Bind=function(c0,c1){return E.checkCancel(function(c2){c0(bG.New(function(c3){var c4;if(c3.$==0){c4=c3.$0;E.scheduler().Fork(function(){try{(c1(c4))(c2);}catch(c5){c2.k({$:1,$0:c5});}});}else E.scheduler().Fork(function(){c2.k(c3);});},c2.ct));});};E.Sleep=function(c0){return function(c1){var c2,c3;c2=void 0;c3=void 0;c2=a.setTimeout(function(){c3.Dispose();E.scheduler().Fork(function(){c1.k({$:0,$0:null});});},c0);c3=E.Register(c1.ct,function(){a.clearTimeout(c2);E.scheduler().Fork(function(){E.cancel(c1);});});};};E.Zero=function(){bH.$cctor();return bH.Zero;};E.Start=function(c0,c1){var c2,c3;c2=(c3=(E.defCTS())[0],c1==null?c3:c1.$0);E.scheduler().Fork(function(){if(!c2.c)c0(bG.New(function(c4){if(c4.$==1)E.UncaughtAsyncError(c4.$0);},c2));});};E.scheduler=function(){bH.$cctor();return bH.scheduler;};E.Return=function(c0){return function(c1){c1.k({$:0,$0:c0});};};E.checkCancel=function(c0){return function(c1){if(c1.ct.c)E.cancel(c1);else c0(c1);};};E.Register=function(c0,c1){var c2;return c0===E.noneCT()?{Dispose:function(){return null;}}:(c2=c0.r.push(c1)-1,{Dispose:function(){return s.set(c0.r,c2,a.ignore);}});};E.cancel=function(c0){c0.k({$:2,$0:new bY.New(c0.ct)});};E.FromContinuations=function(c0){return function(c1){var c2;function c3(c4){if(c2[0])n.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{c2[0]=true;E.scheduler().Fork(c4);}}c2=[false];c0(function(c4){c3(function(){c1.k({$:0,$0:c4});});},function(c4){c3(function(){c1.k({$:1,$0:c4});});},function(c4){c3(function(){c1.k({$:2,$0:c4});});});};};E.defCTS=function(){bH.$cctor();return bH.defCTS;};E.UncaughtAsyncError=function(c0){cY.log("WebSharper: Uncaught asynchronous exception",c0);};E.noneCT=function(){bH.$cctor();return bH.noneCT;};I.GetFieldValues=function(c0){var c1,c2;c1=[];for(var c3 in c0)c1.push(c0[c3]);return c1;};K.EncodeList=cV.Curried3(function(c0,c1,c2){var c3,c4;c3=[];c4=c0();i.iter(function(c5){c3.push(c4(c5));},c2);return c3;});K.Id=cV.Curried3(function(c0,c1,c2){return c2;});K.DecodeList=cV.Curried3(function(c0,c1,c2){var c3;c3=c0();return i.init(s.length(c2),function(c4){return c3(s.get(c2,c4));});});L.NewFromSeq=function(c0){var c1,c2,c3;c1={};c2=M.Get(c0);try{while(c2.MoveNext()){c3=c2.Current();c1[c3[0]]=c3[1];}}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}return c1;};M.Get=function(c0){return c0 instanceof a.Array?M.ArrayEnumerator(c0):V.Equals(typeof c0,"string")?M.StringEnumerator(c0):c0.GetEnumerator();};M.ArrayEnumerator=function(c0){return new bt.New(0,null,function(c1){var c2;c2=c1.s;return c2<s.length(c0)&&(c1.c=s.get(c0,c2),c1.s=c2+1,true);},void 0);};M.StringEnumerator=function(c0){return new bt.New(0,null,function(c1){var c2;c2=c1.s;return c2<c0.length&&(c1.c=c0[c2],c1.s=c2+1,true);},void 0);};M.Get0=function(c0){return c0 instanceof a.Array?M.ArrayEnumerator(c0):V.Equals(typeof c0,"string")?M.StringEnumerator(c0):"GetEnumerator0"in c0?c0.GetEnumerator0():c0.GetEnumerator();};O.JSUnion=function(c0,c1){var c2;function c3(c7){var c8;function c9(c_){return c_!=null&&c_.$==1&&V.Equals(c7,c_.$0);}c8=D.tryFindIndex(function(c_){return c9(c_[0]);},c1);return c8!=null&&c8.$==1?c8.$0:c7.$;}function c4(c7,c8){return s.init(s.length((s.get(c1,c7))[2]),function(c9){return c8["$"+a.String(c9)];});}function c5(c7,c8){var c9,c_,c$;c9=c0==null?{}:new c0();c_=s.get(c1,c7);return(c$=c_[0],c$!=null&&c$.$==1)?c_[0].$0:(c9.$=c7,D.iteri(function(da,db){c9["$"+a.String(da)]=db;},c8),c9);}function c6(c7,c8){var c9;function c_(c$,da){return[c7,c$,da,c9];}c9=c8[2];return D.map(function(c$){return c_(c$[0],c$[1]);},c8[1]);}c2=s.ofSeq(D.collect(function(c7){return c6(c7[0],c7[1]);},D.indexed(c1)));return bb.New$1(function(c7){function c8(c9,c_,c$,da){var db,dc,dd;function de(df){return function(dg){return function(dh){var di;function dj(dk,dl){return((de(di))(dk))(new j({$:1,$0:dl,$1:dh}));}return df.$==1?(di=df.$1,D.collect(function(dk){return dj(dk[0],dk[1]);},df.$0.Parse(dg))):[[dg,c5(c9,s.ofList(i.rev(dh)))]];};};}return O.isCorrectMethod(c_,c7.Method)?(db=bc.startsWith(i.ofArray(c$),c7.Segments),db==null?[]:(dc=db.$0,(dd=i.ofArray(da),dd.$==0?[[Q.New(dc,c7.QueryArgs,c7.FormData,c7.Method,c7.Body),c5(c9,[])]]:((de(dd))(Q.New(dc,c7.QueryArgs,c7.FormData,c7.Method,c7.Body)))(j.Empty)))):[];}return D.collect(function(c9){return c8(c9[0],c9[1],c9[2],c9[3]);},c2);},function(c7){var c8,c9,c_,c$,da,db;function dc(dd,de){return de.Write(dd);}c8=c3(c7);c9=s.get(c1,c8);c_=c9[2];c$=s.get(c9[1],0);da=[Q.Segment(i.ofArray(c$[1]),c$[0])];return c_.length==0?{$:1,$0:da}:(db=(((cV.Curried3(s.map2))(dc))(c4(c8,c7)))(c_),s.forall(function(dd){return dd!=null;},db)?{$:1,$0:D.append(da,D.collect(function(dd){return dd.$0;},db))}:null);});};O.isCorrectMethod=function(c0,c1){return c1!=null&&c1.$==1?c0!=null&&c0.$==1?V.Equals(c1.$0,c0.$0):true:!(c0!=null&&c0.$==1);};P.Parse=function(c0,c1){function c2(c3,c4){return c3.Segments.$==0?{$:1,$0:c4}:null;}return D.tryPick(function(c3){return c2(c3[0],c3[1]);},c0.Parse(c1));};P.HashLink=function(c0,c1){return"#"+P.Link(c0,c1);};P.Link=function(c0,c1){var c2;c2=P.Write(c0,c1);return c2==null?"":c2.$0.ToLink();};P.Write=function(c0,c1){var c2;c2=c0.Write(c1);return c2==null?null:{$:1,$0:Q.Combine(c2.$0)};};Q=N.Route=cV.Class({ToLink:function(){return cb.WriteLink(this.Segments,this.QueryArgs);}},null,Q);Q.FromHash=function(c0,c1){var c2,c3;c2=c0.indexOf("#");return c2===-1?Q.get_Empty():(c3=c0.substring(c2+1),c1!=null&&c1.$0?c3==""||c3=="/"?Q.get_Empty():bw.StartsWith(c3,"/")?Q.FromUrl(c3.substring(1),{$:1,$0:true}):Q.Segment$2(c3):Q.FromUrl(c0.substring(c2),{$:1,$0:false}));};Q.Segment=function(c0,c1){var c2;c2=Q.get_Empty();return Q.New(c0,c2.QueryArgs,c2.FormData,c1,c2.Body);};Q.get_Empty=function(){return Q.New(j.Empty,new bu.New([]),new bu.New([]),null,{$:1,$0:null});};Q.FromUrl=function(c0,c1){var c2,c3,c4;c2=(c3=c0.indexOf("?"),c3===-1?[c0,new bu.New([])]:[bw.Substring(c0,0,c3),Q.ParseQuery(c0.substring(c3+1))]);c4=Q.get_Empty();return Q.New(i.ofArray(bw.SplitChars(c2[0],["/"],c1!=null&&c1.$0?0:1)),c2[1],c4.FormData,c4.Method,c4.Body);};Q.Segment$2=function(c0){var c1;c1=Q.get_Empty();return Q.New(i.ofArray([c0]),c1.QueryArgs,c1.FormData,c1.Method,c1.Body);};Q.ParseQuery=function(c0){return bv.OfArray(s.ofSeq(s.choose(function(c1){var c2,c3;c2=bw.SplitChars(c1,["="],0);return!V.Equals(c2,null)&&c2.length===2?(c3=s.get(c2,1),{$:1,$0:[s.get(c2,0),c3]}):((function(c4){return function(c5){return c4("wrong format for query argument: "+bx.toSafe(c5));};}(function(c4){cY.log(c4);}))(c1),null);},bw.SplitChars(c0,["&"],0))));};Q.Combine=function(c0){var c1,c2,c3,c4,c5,c6,c7;c1=s.ofSeq(c0);c2=s.length(c1);return c2===0?Q.get_Empty():c2===1?s.get(c1,0):(c3=null,c4=null,c5=[],c6=new bu.New([]),c7=new bu.New([]),s.iter(function(c8){var c9,c_;c9=c8.Method;if(c9!=null&&c9.$==1)c3=c9;c_=c8.Body;if(c_==null);else c4=c_;c6=bv.FoldBack(function(c$,da,db){return db.Add$1(c$,da);},c6,c8.QueryArgs);c7=bv.FoldBack(function(c$,da,db){return db.Add$1(c$,da);},c7,c8.FormData);i.iter(function(c$){c5.push(c$);},c8.Segments);},c1),Q.New(i.ofSeq(c5),c6,c7,c3,c4));};Q.New=function(c0,c1,c2,c3,c4){return new Q({Segments:c0,QueryArgs:c1,FormData:c2,Method:c3,Body:c4});};R=v.TemplateInstance=cV.Class({get_Doc:function(){return this.doc;},SetAnchorRoot:function(c0){this.anchorRoot=c0;}},f,R);R.New=cV.Ctor(function(c0,c1){f.New.call(this);this.doc=c1;this.allVars=c0.$==0?c0.$0:n.FailWith("Should not happen");this.anchorRoot=null;},R);T=S.Elt=cV.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},x,T);T.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},T);U=S.Text=cV.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;},get_AsChoiceView:function(){return{$:0,$0:this.fillWith};}},x,U);U.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},U);V.Equals=function(c0,c1){var c2,c3,c4,c5;if(c0===c1)return true;else{c2=typeof c0;if(c2=="object"){if(c0===null||c0===void 0||c1===null||c1===void 0||!V.Equals(typeof c1,"object"))return false;else if("Equals"in c0)return c0.Equals(c1);else if("Equals"in c1)return false;else if(c0 instanceof a.Array&&c1 instanceof a.Array)return V.arrayEquals(c0,c1);else if(c0 instanceof a.Date&&c1 instanceof a.Date)return V.dateEquals(c0,c1);else{c3=[true];for(var c6 in c0)if(function(c7){c3[0]=!c0.hasOwnProperty(c7)||c1.hasOwnProperty(c7)&&V.Equals(c0[c7],c1[c7]);return!c3[0];}(c6))break;if(c3[0]){for(var c7 in c1)if(function(c8){c3[0]=!c1.hasOwnProperty(c8)||c0.hasOwnProperty(c8);return!c3[0];}(c7))break;}return c3[0];}}else return c2=="function"&&("$Func"in c0?c0.$Func===c1.$Func&&c0.$Target===c1.$Target:"$Invokes"in c0&&"$Invokes"in c1&&V.arrayEquals(c0.$Invokes,c1.$Invokes));}};V.arrayEquals=function(c0,c1){var c2,c3;if(s.length(c0)===s.length(c1)){c2=true;c3=0;while(c2&&c3<s.length(c0)){!V.Equals(s.get(c0,c3),s.get(c1,c3))?c2=false:void 0;c3=c3+1;}return c2;}else return false;};V.dateEquals=function(c0,c1){return c0.getTime()===c1.getTime();};V.Hash=function(c0){var c1;c1=typeof c0;return c1=="function"?0:c1=="boolean"?c0?1:0:c1=="number"?c0:c1=="string"?V.hashString(c0):c1=="object"?c0==null?0:c0 instanceof a.Array?V.hashArray(c0):V.hashObject(c0):0;};V.hashString=function(c0){var c1,c2,c3;if(c0===null)return 0;else{c1=5381;for(c2=0,c3=c0.length-1;c2<=c3;c2++)c1=V.hashMix(c1,c0[c2].charCodeAt());return c1;}};V.hashArray=function(c0){var c1,c2,c3;c1=-34948909;for(c2=0,c3=s.length(c0)-1;c2<=c3;c2++)c1=V.hashMix(c1,V.Hash(s.get(c0,c2)));return c1;};V.hashObject=function(c0){var c1,c2;if("GetHashCode"in c0)return c0.GetHashCode();else{c1=[0];for(var c3 in c0)if(function(c4){c1[0]=V.hashMix(V.hashMix(c1[0],V.hashString(c4)),V.Hash(c0[c4]));return false;}(c3))break;return c1[0];}};V.hashMix=function(c0,c1){return(c0<<5)+c0+c1;};V.Compare=function(c0,c1){var c2,c3,c4,c5,c6,c7;if(c0===c1)return 0;else{c3=typeof c0;switch(c3=="function"?1:c3=="boolean"?2:c3=="number"?2:c3=="string"?2:c3=="object"?3:0){case 0:return typeof c1=="undefined"?0:-1;case 1:return n.FailWith("Cannot compare function values.");case 2:return c0<c1?-1:1;case 3:if(c0===null)c4=-1;else if(c1===null)c4=1;else if("CompareTo"in c0)c4=c0.CompareTo(c1);else if("CompareTo0"in c0)c4=c0.CompareTo0(c1);else if(c0 instanceof a.Array&&c1 instanceof a.Array)c4=V.compareArrays(c0,c1);else if(c0 instanceof a.Date&&c1 instanceof a.Date)c4=V.compareDates(c0,c1);else{c5=[0];for(var c8 in c0)if(function(c9){return!c0.hasOwnProperty(c9)?false:!c1.hasOwnProperty(c9)?(c5[0]=1,true):(c5[0]=V.Compare(c0[c9],c1[c9]),c5[0]!==0);}(c8))break;if(c5[0]===0){for(var c9 in c1)if(function(c_){return!c1.hasOwnProperty(c_)?false:!c0.hasOwnProperty(c_)&&(c5[0]=-1,true);}(c9))break;}c4=c5[0];}return c4;}}};V.compareArrays=function(c0,c1){var c2,c3;if(s.length(c0)<s.length(c1))return -1;else if(s.length(c0)>s.length(c1))return 1;else{c2=0;c3=0;while(c2===0&&c3<s.length(c0)){c2=V.Compare(s.get(c0,c3),s.get(c1,c3));c3=c3+1;}return c2;}};V.compareDates=function(c0,c1){return V.Compare(c0.getTime(),c1.getTime());};X.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(c0){var c1,c2;c1=cW.random()*16|0;c2=c0=="x"?c1:c1&3|8;return c2.toString(16);});};Z=Y.FSharpEvent=cV.Class({},f,Z);Z.New=cV.Ctor(function(){f.New.call(this);this.event=bl.New(cV.MarkResizable([]));},Z);_0.EventQ2=function(c0,c1,c2,c3){return new bj.New(c1,function(c4){return function(c5){var c6;c6=c2();c6.SetAnchorRoot(c4);return c3({Vars:c6,Anchors:c6,Target:c4,Event:c5});};});};_0.CompleteHoles=function(c0,c1,c2){var c4,c5,c6,c7,c8;function c3(c9,c_,c$){var da;return c5.Contains(c9)?null:(da=V.Equals(c_,0)?bz.GetOrAddHoleFor(c0,c9,function(){return new bi.New(c9,h.Create$1(""));}):V.Equals(c_,1)?bz.GetOrAddHoleFor(c0,c9,function(){return new bh.New(c9,h.Create$1(0));}):V.Equals(c_,2)?bz.GetOrAddHoleFor(c0,c9,function(){return new bA.New(c9,h.Create$1(false));}):V.Equals(c_,3)?bz.GetOrAddHoleFor(c0,c9,function(){return new bB.New(c9,h.Create$1(-8640000000000000));}):V.Equals(c_,4)?bz.GetOrAddHoleFor(c0,c9,function(){return new bC.New(c9,h.Create$1([]));}):V.Equals(c_,5)?bz.GetOrAddHoleFor(c0,c9,function(){var db;db=self.document.querySelector("[ws-dom="+c9+"]");db.removeAttribute("ws-dom");return new bD.New(c9,h.Create$1({$:1,$0:db}));}):n.FailWith("Invalid value type"),(c4.set_Item(c9,da),{$:1,$0:da}));}c4=new $.New$5();c5=new by.New$3();c6=M.Get(c1);try{while(c6.MoveNext()){c7=c6.Current();c8=c7.get_Name();c5.SAdd(c8);c4.set_Item(c8,c7);}}finally{if(typeof c6=="object"&&"Dispose"in c6)c6.Dispose();}return[D.append(c1,s.choose(function(c9){return c3(c9[0],c9[1],c9[2]);},c2)),{$:0,$0:c4}];};_3.Render$8=function(c0,c1,c2,c3){var c4;return bm.RenderLineChart(c0,(c4=_2.defaultSize(),c1==null?c4:c1.$0),c2,c3);};_3.Render$5=function(c0,c1,c2,c3){var c4;return bm.RenderPolarAreaChart(c0,(c4=_2.defaultSize(),c1==null?c4:c1.$0),{$:1,$0:c2==null?{}:c2.$0},c3);};_4.Line=function(c0){return new bo.New({$:1,$0:bp.streamWithLabel(c0)},bn.defaultChartConfig(),bn.defaultSeriesChartConfig(),bn.defaultColorConfig());};_5.createBalanceChart=function(c0,c1){return _3.Render$5(bq.Pie(i.zip(i.ofArray(["Total Income","Total Expenses"]),i.ofArray([c0,c1]))),{$:1,$0:{$:0,$0:300,$1:300}},null,null);};_5.createPieChart=function(c0,c1){return _3.Render$5(bq.Pie(i.zip(c0,c1)),{$:1,$0:{$:0,$0:300,$1:300}},null,null);};_6=g.Doc=cV.Class({},f,_6);_6.EmbedView=function(c0){var c1;c1=br.CreateEmbedNode();return _6.Mk({$:2,$0:c1},o.Map(a.ignore,o.Bind(function(c2){br.UpdateEmbedNode(c1,c2.docNode);return c2.updates;},c0)));};_6.Mk=function(c0,c1){return new _6.New(c0,c1);};_6.Convert=function(c0,c1){return _6.Flatten(o.MapSeqCached(c0,c1));};_6.RunInPlace=function(c0,c1,c2){var c3;c3=br.CreateRunState(c1,c2.docNode);o.Sink(ch.get_UseAnimations()||ci.BatchUpdatesEnabled()?cj.StartProcessor(br.PerformAnimatedUpdate(c0,c3,c2.docNode)):function(){br.PerformSyncUpdate(c0,c3,c2.docNode);},c2.updates);};_6.Flatten=function(c0){return _6.EmbedView(o.Map(_6.Concat,c0));};_6.get_Empty=function(){return _6.Mk(null,o.Const());};_6.Concat=function(c0){var c1;c1=cs.ofSeqNonCopying(c0);return cs.TreeReduce(_6.get_Empty(),_6.Append,c1);};_6.TextNode=function(c0){return _6.Mk({$:5,$0:self.document.createTextNode(c0)},o.Const());};_6.TextView=function(c0){var c1;c1=br.CreateTextNode();return _6.Mk({$:4,$0:c1},o.Map(function(c2){br.UpdateTextNode(c1,c2);},c0));};_6.Append=function(c0,c1){return _6.Mk({$:0,$0:c0.docNode,$1:c1.docNode},o.Map2Unit(c0.updates,c1.updates));};_6.Element=function(c0,c1,c2){var c3,c4;c3=ck.Concat(c1);c4=_6.Concat(c2);return cg.New(self.document.createElement(c0),c3,c4);};_6.New=cV.Ctor(function(c0,c1){f.New.call(this);this.docNode=c0;this.updates=c1;},_6);_8.Int=function(){_8.set_counter(_8.counter()+1);return _8.counter();};_8.set_counter=function(c0){bS.$cctor();bS.counter=c0;};_8.counter=function(){bS.$cctor();return bS.counter;};_9=C.ArrayStorage=cV.Class({SRemoveIf:function(c0,c1){return s.filter(function(c2){return!c0(c2);},c1);},SInit:function(){return this.init;},SSetAt:function(c0,c1,c2){s.set(c2,c0,c1);return c2;},SAppend:function(c0,c1){c1.push(c0);return c1;}},f,_9);_9.New=cV.Ctor(function(c0){f.New.call(this);this.init=c0;},_9);s.ofSeq=function(c0){var c1,c2;if(c0 instanceof a.Array)return c0.slice();else if(c0 instanceof j)return s.ofList(c0);else{c1=[];c2=M.Get(c0);try{while(c2.MoveNext())c1.push(c2.Current());return c1;}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}}};s.ofList=function(c0){var c1,c2;c2=[];c1=c0;while(!(c1.$==0)){c2.push(i.head(c1));c1=i.tail(c1);}return c2;};s.map2=function(c0,c1,c2){var c3,c4,c5;s.checkLength(c1,c2);c3=new a.Array(c2.length);for(c4=0,c5=c2.length-1;c4<=c5;c4++)c3[c4]=c0(c1[c4],c2[c4]);return c3;};s.forall=function(c0,c1){var c2,c3,c4,c5;c2=true;c3=0;c5=s.length(c1);while(c2&&c3<c5)if(c0(c1[c3]))c3=c3+1;else c2=false;return c2;};s.init=function(c0,c1){var c2,c3,c4;if(c0<0)n.FailWith("Negative size given.");else null;c2=new a.Array(c0);for(c3=0,c4=c0-1;c3<=c4;c3++)c2[c3]=c1(c3);return c2;};s.checkLength=function(c0,c1){if(c0.length!==c1.length)n.FailWith("The arrays have different lengths.");};s.choose=function(c0,c1){var c2,c3,c4,c5;c2=[];for(c3=0,c4=c1.length-1;c3<=c4;c3++){c5=c0(c1[c3]);if(c5==null);else c2.push(c5.$0);}return c2;};s.tryFindIndex=function(c0,c1){var c2,c3;c2=null;c3=0;while(c3<c1.length&&c2==null){c0(c1[c3])?c2={$:1,$0:c3}:void 0;c3=c3+1;}return c2;};s.map=function(c0,c1){var c2,c3,c4;c2=new a.Array(c1.length);for(c3=0,c4=c1.length-1;c3<=c4;c3++)c2[c3]=c0(c1[c3]);return c2;};s.iter=function(c0,c1){var c2,c3;for(c2=0,c3=c1.length-1;c2<=c3;c2++)c0(c1[c2]);};s.iteri=function(c0,c1){var c2,c3;for(c2=0,c3=c1.length-1;c2<=c3;c2++)c0(c2,c1[c2]);};s.tryPick=function(c0,c1){var c2,c3,c4;c2=null;c3=0;while(c3<c1.length&&c2==null){c4=c0(c1[c3]);if(c4!=null&&c4.$==1)c2=c4;c3=c3+1;}return c2;};s.concat=function(c0){return a.Array.prototype.concat.apply([],s.ofSeq(c0));};s.filter=function(c0,c1){var c2,c3,c4;c2=[];for(c3=0,c4=c1.length-1;c3<=c4;c3++)if(c0(c1[c3]))c2.push(c1[c3]);return c2;};s.sortInPlace=function(c0){s.mapInPlace(function(c1){return c1[0];},s.mapiInPlace(function(c1,c2){return[c2,c1];},c0).sort(V.Compare));};s.exists=function(c0,c1){var c2,c3,c4,c5;c2=false;c3=0;c5=s.length(c1);while(!c2&&c3<c5)if(c0(c1[c3]))c2=true;else c3=c3+1;return c2;};s.foldBack=function(c0,c1,c2){var c3,c4,c5,c6,c7;c3=c2;c5=c1.length;for(c6=1,c7=c5;c6<=c7;c6++)c3=c0(c1[c5-c6],c3);return c3;};s.pick=function(c0,c1){var c2;c2=s.tryPick(c0,c1);return c2==null?n.FailWith("KeyNotFoundException"):c2.$0;};s.create=function(c0,c1){var c2,c3,c4;c2=new a.Array(c0);for(c3=0,c4=c0-1;c3<=c4;c3++)c2[c3]=c1;return c2;};$=_.Dictionary=cV.Class({set_Item:function(c0,c1){this.set(c0,c1);},TryGetValue:function(c0,c1){var c2,c3,c4;c2=this;c3=this.data[this.hash(c0)];return c3==null?false:(c4=s.tryPick(function(c5){var c6;c6=n.KeyValue(c5);return c2.equals.apply(null,[c6[0],c0])?{$:1,$0:c6[1]}:null;},c3),c4!=null&&c4.$==1&&(c1.set(c4.$0),true));},RemoveKey:function(c0){return this.remove(c0);},GetEnumerator:function(){return M.Get0(s.concat(I.GetFieldValues(this.data)));},set:function(c0,c1){var c2,c3,c4,c5;c2=this;c3=this.hash(c0);c4=this.data[c3];if(c4==null){this.count=this.count+1;this.data[c3]=new a.Array({K:c0,V:c1});}else{c5=s.tryFindIndex(function(c6){return c2.equals.apply(null,[(n.KeyValue(c6))[0],c0]);},c4);c5==null?(this.count=this.count+1,c4.push({K:c0,V:c1})):c4[c5.$0]={K:c0,V:c1};}},remove:function(c0){var c1,c2,c3,c4;c1=this;c2=this.hash(c0);c3=this.data[c2];return c3==null?false:(c4=s.filter(function(c5){return!c1.equals.apply(null,[(n.KeyValue(c5))[0],c0]);},c3),s.length(c4)<c3.length&&(this.count=this.count-1,this.data[c2]=c4,true));},ContainsKey:function(c0){var c1,c2;c1=this;c2=this.data[this.hash(c0)];return c2==null?false:s.exists(function(c3){return c1.equals.apply(null,[(n.KeyValue(c3))[0],c0]);},c2);},Item:function(c0){return this.get(c0);},Values:function(){return new cu.New(this);},Keys:function(){return new cB.New(this);},get:function(c0){var c1,c2;c1=this;c2=this.data[this.hash(c0)];return c2==null?bW.notPresent():s.pick(function(c3){var c4;c4=n.KeyValue(c3);return c1.equals.apply(null,[c4[0],c0])?{$:1,$0:c4[1]}:null;},c2);}},f,$);$.New$5=cV.Ctor(function(){$.New$6.call(this,[],V.Equals,V.Hash);},$);$.New$6=cV.Ctor(function(c0,c1,c2){var c3,c4;f.New.call(this);this.equals=c1;this.hash=c2;this.count=0;this.data=[];c3=M.Get(c0);try{while(c3.MoveNext()){c4=c3.Current();this.set(c4.K,c4.V);}}finally{if(typeof c3=="object"&&"Dispose"in c3)c3.Dispose();}},$);A.Obsolete=function(c0){var c1,c2,c3,c4,c5;c2=c0.s;if(c2==null||(c2!=null&&c2.$==2?(c1=c2.$1,false):c2!=null&&c2.$==3?(c1=c2.$1,false):true))void 0;else{c0.s=null;for(c3=0,c4=s.length(c1)-1;c3<=c4;c3++){c5=s.get(c1,c3);if(typeof c5=="object")(function(c6){A.Obsolete(c6);}(c5));else c5();}}};A.New=function(c0){return{s:c0};};bb.New$1=function(c0,c1){return{Parse:c0,Write:c1};};bc.startsWith=function(c0,c1){var c2;switch(c0.$==1?c1.$==1?V.Equals(c0.$0,c1.$0)?(c2=[c1.$0,c1.$1,c0.$0,c0.$1],1):2:2:0){case 0:return{$:1,$0:c1};case 1:return bc.startsWith(c2[3],c2[1]);case 2:return null;}};bd.ofObj=function(c0){return c0==null?null:{$:1,$0:c0};};bd.fold=function(c0,c1,c2){return c2==null?c1:c0(c1,c2.$0);};bf.TryParseInt32=function(c0,c1){return bf.TryParse(c0,-2147483648,2147483647,c1);};bg=S.TextView=cV.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith};},get_AsChoiceView:function(){return{$:1,$0:this.fillWith};}},x,bg);bg.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},bg);bh=S.VarFloatUnchecked=cV.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:o.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(c0,c1){(c0(c1))(b2.FloatValueUnchecked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:o.Map(a.String,this.fillWith.get_View())};}},x,bh);bh.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},bh);bi=S.VarStr=cV.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith.get_View()};},AddAttribute:function(c0,c1){(c0(c1))(b2.Value(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:o.Map(a.String,this.fillWith.get_View())};}},x,bi);bi.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},bi);bj=S.EventQ=cV.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},x,bj);bj.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},bj);bl=bk.Event=cV.Class({Trigger:function(c0){var c1,c2,c3;c1=this.Handlers.slice();for(c2=0,c3=c1.length-1;c2<=c3;c2++)(s.get(c1,c2))(null,c0);},Subscribe$1:function(c0){var c1;function c2(c4,c5){return c0.OnNext(c5);}function c3(){c1.RemoveHandler$1(c2);}c1=this;this.AddHandler$1(c2);return{Dispose:function(){return c3();}};},AddHandler$1:function(c0){this.Handlers.push(c0);},RemoveHandler$1:function(c0){var c1,c2;c1=D.tryFindIndex(function(c3){return V.Equals(c0,c3);},this.Handlers);if(c1==null);else{c2=this.Handlers;c2.splice.apply(c2,[c1.$0,1]);}},Dispose:a.ignore,Subscribe:function(c0){return this.Subscribe$1(c0);}},null,bl);bl.New=function(c0){return new bl({Handlers:c0});};bm.RenderLineChart=function(c0,c1,c2,c3){return bm.withNewCanvas(c1,function(c4){var c5,c6,c7,c8,c9;c5=bm.mkInitial(c0.get_DataSet(),c3);c6=(c7={},c7.datasets=[(c8={type:"line"},c8.label=c0.get__Config().Title,c8.fill=c0.get__SeriesConfig().IsFilled,c8.backgroundColor=a.String(c0.get__SeriesConfig().FillColor),c8.borderColor=a.String(c0.get__SeriesConfig().StrokeColor),c8.pointBackgroundColor=a.String(c0.get__ColorConfig().PointColor),c8.pointHoverBackgroundColor=a.String(c0.get__ColorConfig().PointHighlightFill),c8.pointHoverBorderColor=a.String(c0.get__ColorConfig().PointHighlightStroke),c8.pointBorderColor=a.String(c0.get__ColorConfig().PointStrokeColor),c8.data=s.map(function(c_){return c_[1];},c5),c8)],c7);c6.labels=s.map(function(c_){return c_[0];},c5);c9=new a.Chart(c4,{data:c6,options:c2==null?{}:c2.$0});bm.registerUpdater(c0,function(c_,c$){var da;da=s.get(c9.data.datasets,0).data;da[c_]=c$(s.get(da,c_));},function(){c9.update();});return bm.onEvent(c0.get_DataSet(),c3,function(){var c_,c$,da;c_=c9.data;c$=c_.datasets;da=c_.labels;s.iter(function(db){db.data.shift();},c$);da.shift();return c9.update();},function(c_,c$){var da,db,dc,dd;da=c$[1];db=c9.data;dc=db.datasets;dd=db.labels;s.iteri(function(de,df){var dg;dg=df.data;return dg[s.length(dg)]=da;},dc);dd[s.length(dd)]=c$[0];return c9.update();});});};bm.withNewCanvas=function(c0,c1){var c2,c3;c2=c0.$0;c3=c0.$1;return _6.Element("div",[ck.Create("width",a.String(c2)),ck.Create("height",a.String(c3)),b2.Style("width",a.String(c2)+"px"),b2.Style("height",a.String(c3)+"px")],[_6.Element("canvas",[b2.OnAfterRender(function(c4){var c5;c5=c4.getContext("2d");c4.width=c2;c4.height=c3;c1(c4,c5);})],[])]);};bm.mkInitial=function(c0,c1){return c0.$==0?bd.fold(function(c2,c3){var c4;c4=s.length(c2)-c3;return c4>=s.length(c2)?[]:c4<=0?c2:b5.array(c2,{$:1,$0:c4},null);},s.ofSeq(c0.$0),c1):[];};bm.registerUpdater=function(c0,c1,c2){var c3;function c4(c5,c6){c1(c5,c6);c3.Update(c2);}c3=new b7.New(null,null);c0.WebSharper_Charting_Charts_IMutableChart_2$OnUpdate(function(c5){return c4(c5[0],c5[1]);});};bm.onEvent=function(c0,c1,c2,c3){var c4;if(c0.$==1){c4=[0];c0.$0.Subscribe(b8.observer(function(c5){var c6;if(c1==null);else{c6=c1.$0;c4[0]>=c6?c2(c6,c4[0]):void 0;}c3(c4[0],c5);c4[0]++;}));}};bm.RenderPolarAreaChart=function(c0,c1,c2,c3){return bm.withNewCanvas(c1,function(c4){var c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh;function di(dj,dk){var dl;dl=s.get(c_.data.datasets,0).data;dl[dj]=dk(s.get(dl,dj));c_.update();}c5=bm.mkInitial(c0.WebSharper_Charting_Charts_IPolarAreaChart_1$get_DataSet(),null);c6=s.map(function(dj){return a.String(dj.Color);},c5);c7=s.map(function(dj){return a.String(dj.Highlight);},c5);c8=s.map(function(dj){return dj.Value;},c5);c9=s.map(function(dj){return dj.Label;},c5);c_=new a.Chart(c4,c2.$==1?(c$=(da={},da.datasets=[(db={type:"pie"},db.data=c8,db.backgroundColor=c6,db.hoverBackgroundColor=c7,db)],da),(c$.labels=c9,{data:c$,options:c2.$0})):c2.$==2?(dc=(dd={},dd.datasets=[(de={type:"doughnut"},de.data=c8,de.backgroundColor=c6,de.hoverBackgroundColor=c7,de)],dd),(dc.labels=c9,{data:dc,options:c2.$0})):(df=(dg={},dg.datasets=[(dh={type:"polarArea"},dh.data=c8,dh.backgroundColor=c6,dh.hoverBackgroundColor=c7,dh)],dg),(df.labels=c9,{data:df,options:c2.$0})));bm.onEvent(c0.WebSharper_Charting_Charts_IPolarAreaChart_1$get_DataSet(),c3,function(){var dj,dk,dl;dj=c_.data;dk=dj.datasets;dl=dj.labels;s.iter(function(dm){dm.data.shift();},dk);dl.shift();return c_.update();},function(dj,dk){var dl,dm,dn;dl=c_.data;dm=dl.datasets;dn=dl.labels;s.iteri(function(_do,dp){var dq;dq=dp.data;return dq[s.length(dq)]=dk.Value;},dm);dn[s.length(dn)]=dk.Label;return c_.update();});return c0.WebSharper_Charting_Charts_IMutableChart_2$OnUpdate(function(dj){return di(dj[0],dj[1]);});});};_2.defaultSize=function(){bN.$cctor();return bN.defaultSize;};bo=bn.LineChart=cV.Class({get_DataSet:function(){return this.dataset;},get__Config:function(){return this.WebSharper_Charting_Charts_IChart_1$get_Config();},get__SeriesConfig:function(){return this.WebSharper_Charting_Charts_ISeriesChart_1$get_SeriesConfig();},get__ColorConfig:function(){return this.WebSharper_Charting_Charts_IColorChart_1$get_ColorConfig();},WebSharper_Charting_Charts_IChart_1$get_Config:function(){return this.cfg;},WebSharper_Charting_Charts_ISeriesChart_1$get_SeriesConfig:function(){return this.scfg;},WebSharper_Charting_Charts_IColorChart_1$get_ColorConfig:function(){return this.ccfg;},WebSharper_Charting_Charts_IMutableChart_2$OnUpdate:function(c0){this.event.event.Subscribe(b8.observer(c0));}},f,bo);bo.New=cV.Ctor(function(c0,c1,c2,c3){f.New.call(this);this.dataset=c0;this.cfg=c1;this.scfg=c2;this.ccfg=c3;this.event=new Z.New();},bo);bp.streamWithLabel=function(c0){function c1(c2,c3){return[a.String(c2),c3];}return bO.Select(bO.Aggregate(c0,[0,0],function(c2,c3){return(function(c4){var c5;c5=c4[0];return function(c6){return[c5+1,c6];};}(c2))(c3);}),function(c2){return c1(c2[0],c2[1]);});};bn.defaultChartConfig=function(){bP.$cctor();return bP.defaultChartConfig;};bn.defaultSeriesChartConfig=function(){bP.$cctor();return bP.defaultSeriesChartConfig;};bn.defaultColorConfig=function(){bP.$cctor();return bP.defaultColorConfig;};bn.defaultPolarData=function(){bP.$cctor();return bP.defaultPolarData;};bq.Pie=function(c0){return new bR.New({$:0,$0:D.map(function(c1){return((bn.defaultPolarData())(c1[0]))(c1[1]);},c0)},bn.defaultChartConfig());};br.CreateEmbedNode=function(){return{Current:null,Dirty:false};};br.UpdateEmbedNode=function(c0,c1){c0.Current=c1;c0.Dirty=true;};br.CreateRunState=function(c0,c1){return cw.New(cx.get_Empty(),br.CreateElemNode(c0,cl.EmptyAttr(),c1));};br.PerformAnimatedUpdate=function(c0,c1,c2){var c3;return ch.get_UseAnimations()?(c3=null,E.Delay(function(){var c4,c5,c6;c4=cx.FindAll(c2);c5=br.ComputeChangeAnim(c1,c4);c6=br.ComputeEnterAnim(c1,c4);return E.Bind(ch.Play(ch.Append(c5,br.ComputeExitAnim(c1,c4))),function(){return E.Bind(br.SyncElemNodesNextFrame(c0,c1),function(){return E.Bind(ch.Play(c6),function(){c1.PreviousNodes=c4;return E.Return(null);});});});})):br.SyncElemNodesNextFrame(c0,c1);};br.PerformSyncUpdate=function(c0,c1,c2){var c3;c3=cx.FindAll(c2);br.SyncElemNode(c0,c1.Top);c1.PreviousNodes=c3;};br.LinkElement=function(c0,c1){br.InsertDoc(c0,c1,null);};br.InsertBeforeDelim=function(c0,c1){var c2,c3;c2=c0.parentNode;c3=self.document.createTextNode("");c2.insertBefore(c3,c0);br.LinkPrevElement(c0,c1);return c3;};br.CreateElemNode=function(c0,c1,c2){var c3;br.LinkElement(c0,c2);c3=cl.Insert(c0,c1);return b_.New(c3,c2,null,c0,_8.Int(),cV.GetOptional(c3.OnAfterRender));};br.SyncElemNodesNextFrame=function(c0,c1){function c2(c3){a.requestAnimationFrame(function(){br.SyncElemNode(c0,c1.Top);c3();});}return ci.BatchUpdatesEnabled()?E.FromContinuations(function(c3,c4,c5){return c2.apply(null,[c3,c4,c5]);}):(br.SyncElemNode(c0,c1.Top),E.Return(null));};br.ComputeExitAnim=function(c0,c1){return ch.Concat(s.map(function(c2){return cl.GetExitAnim(c2.Attr);},cx.ToArray(cx.Except(c1,cx.Filter(function(c2){return cl.HasExitAnim(c2.Attr);},c0.PreviousNodes)))));};br.ComputeEnterAnim=function(c0,c1){return ch.Concat(s.map(function(c2){return cl.GetEnterAnim(c2.Attr);},cx.ToArray(cx.Except(c0.PreviousNodes,cx.Filter(function(c2){return cl.HasEnterAnim(c2.Attr);},c1)))));};br.ComputeChangeAnim=function(c0,c1){var c2;function c3(c4){return cl.HasChangeAnim(c4.Attr);}c2=function(c4){return cx.Filter(c3,c4);};return ch.Concat(s.map(function(c4){return cl.GetChangeAnim(c4.Attr);},cx.ToArray(cx.Intersect(c2(c0.PreviousNodes),c2(c1)))));};br.SyncElemNode=function(c0,c1){!c0?br.SyncElement(c1):void 0;br.Sync(c1.Children);br.AfterRender(c1);};br.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};br.UpdateTextNode=function(c0,c1){c0.Value=c1;c0.Dirty=true;};br.InsertDoc=function(c0,c1,c2){var c3,c4,c5;while(true)if(c1!=null&&c1.$==1)return br.InsertNode(c0,c1.$0.El,c2);else if(c1!=null&&c1.$==2){c3=c1.$0;c3.Dirty=false;c1=c3.Current;}else if(c1==null)return c2;else if(c1!=null&&c1.$==4)return br.InsertNode(c0,c1.$0.Text,c2);else if(c1!=null&&c1.$==5)return br.InsertNode(c0,c1.$0,c2);else if(c1!=null&&c1.$==6)return s.foldBack(function(c6,c7){return(((cV.Curried3(function(c8,c9,c_){return c9==null||c9.constructor===ba?br.InsertDoc(c8,c9,c_):br.InsertNode(c8,c9,c_);}))(c0))(c6))(c7);},c1.$0.Els,c2);else{c4=c1.$1;c5=c1.$0;c1=c5;c2=br.InsertDoc(c0,c4,c2);}};br.LinkPrevElement=function(c0,c1){br.InsertDoc(c0.parentNode,c1,c0);};br.SyncElement=function(c0){function c1(c2){function c3(c4){var c5,c6,c7,c8;while(true){if(c4!=null&&c4.$==0){c6=c4.$1;c7=c4.$0;if(c3(c7))return true;else c4=c6;}else if(c4!=null&&c4.$==2){c8=c4.$0;if(c8.Dirty)return true;else c4=c8.Current;}else return c4!=null&&c4.$==6&&(c5=c4.$0,c5.Dirty||s.exists(c1,c5.Holes));}}return c3(c2.Children);}cl.Sync(c0.El,c0.Attr);if(c1(c0))br.DoSyncElement(c0);};br.Sync=function(c0){var c1,c2,c3,c4,c5;while(true){if(c0!=null&&c0.$==1)return br.SyncElemNode(false,c0.$0);else if(c0!=null&&c0.$==2){c3=c0.$0;c0=c3.Current;}else if(c0==null)return null;else if(c0!=null&&c0.$==5)return null;else if(c0!=null&&c0.$==4){c1=c0.$0;return c1.Dirty?(c1.Text.nodeValue=c1.Value,c1.Dirty=false):null;}else if(c0!=null&&c0.$==6){c2=c0.$0;s.iter(function(c6){br.SyncElemNode(false,c6);},c2.Holes);s.iter(function(c6){cl.Sync(c6[0],c6[1]);},c2.Attrs);return br.AfterRender(c2);}else{c4=c0.$1;c5=c0.$0;br.Sync(c5);c0=c4;}}};br.AfterRender=function(c0){var c1;c1=cV.GetOptional(c0.Render);if(c1!=null&&c1.$==1){c1.$0(c0.El);cV.SetOptional(c0,"Render",null);}};br.InsertNode=function(c0,c1,c2){cf.InsertAt(c0,c2,c1);return c1;};br.DoSyncElement=function(c0){var c1,c2,c3;function c4(c5,c6){var c7,c8,c9,c_;while(true){if(c5!=null&&c5.$==1)return c5.$0.El;else if(c5!=null&&c5.$==2){c8=c5.$0;if(c8.Dirty){c8.Dirty=false;return br.InsertDoc(c1,c8.Current,c6);}else c5=c8.Current;}else if(c5==null)return c6;else if(c5!=null&&c5.$==4)return c5.$0.Text;else if(c5!=null&&c5.$==5)return c5.$0;else if(c5!=null&&c5.$==6){c7=c5.$0;c7.Dirty?c7.Dirty=false:void 0;return s.foldBack(function(c$,da){return c$==null||c$.constructor===ba?c4(c$,da):c$;},c7.Els,c6);}else{c9=c5.$1;c_=c5.$0;c5=c_;c6=c4(c9,c6);}}}c1=c0.El;cO.Iter((c2=c0.El,function(c5){cf.RemoveNode(c2,c5);}),cO.Except(cO.DocChildren(c0),cO.Children(c0.El,cV.GetOptional(c0.Delimiters))));c4(c0.Children,(c3=cV.GetOptional(c0.Delimiters),c3!=null&&c3.$==1?c3.$0[1]:null));};bs=E.Scheduler=cV.Class({Fork:function(c0){var c1;c1=this;this.robin.push(c0);if(this.idle){this.idle=false;a.setTimeout(function(){c1.tick();},0);}},tick:function(){var c0,c1,c2;c1=this;c2=cZ.now();c0=true;while(c0)if(this.robin.length===0){this.idle=true;c0=false;}else{(this.robin.shift())();cZ.now()-c2>40?(a.setTimeout(function(){c1.tick();},0),c0=false):void 0;}}},f,bs);bs.New=cV.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bs);bt=M.T=cV.Class({MoveNext:function(){var c0;c0=this.n(this);this.e=c0?1:2;return c0;},Current:function(){return this.e===1?this.c:this.e===0?n.FailWith("Enumeration has not started. Call MoveNext."):n.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},f,bt);bt.New=cV.Ctor(function(c0,c1,c2,c3){f.New.call(this);this.s=c0;this.c=c1;this.n=c2;this.d=c3;this.e=0;},bt);bu=_.FSharpMap=cV.Class({GetEnumerator:function(){return M.Get(D.map(function(c0){return{K:c0.Key,V:c0.Value};},bT.Enumerate(false,this.tree)));},Equals:function(c0){return this.Count()===c0.Count()&&D.forall2(V.Equals,this,c0);},Count:function(){var c0;c0=this.tree;return c0==null?0:c0.Count;},Add$1:function(c0,c1){return new bu.New$1(bT.Add(bV.New(c0,c1),this.tree));},get_IsEmpty:function(){return this.tree==null;},GetHashCode:function(){return V.Hash(s.ofSeq(this));},get_Tree:function(){return this.tree;},CompareTo0:function(c0){return D.compareWith(V.Compare,this,c0);}},f,bu);bu.New=cV.Ctor(function(c0){bu.New$1.call(this,ca.fromSeq(c0));},bu);bu.New$1=cV.Ctor(function(c0){f.New.call(this);this.tree=c0;},bu);bv.OfArray=function(c0){return new bu.New$1(bT.OfSeq(D.map(function(c1){return bV.New(c1[0],c1[1]);},c0)));};bv.FoldBack=function(c0,c1,c2){return D.fold(function(c3,c4){return c0(c4.Key,c4.Value,c3);},c2,bT.Enumerate(true,c1.get_Tree()));};bv.ToSeq=function(c0){return D.map(function(c1){return[c1.Key,c1.Value];},bT.Enumerate(false,c0.get_Tree()));};bw.StartsWith=function(c0,c1){return c0.substring(0,c1.length)==c1;};bw.Substring=function(c0,c1,c2){return c0.substr(c1,c2);};bw.SplitChars=function(c0,c1,c2){return bw.Split(c0,new a.RegExp("["+bw.RegexEscape(c1.join(""))+"]"),c2);};bw.Split=function(c0,c1,c2){return c2===1?s.filter(function(c3){return c3!=="";},bw.SplitWith(c0,c1)):bw.SplitWith(c0,c1);};bw.RegexEscape=function(c0){return c0.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bw.SplitWith=function(c0,c1){return c0.split(c1);};bw.concat=function(c0,c1){return s.ofSeq(c1).join(c0);};bw.IsNullOrEmpty=function(c0){return c0==null||c0=="";};bw.Join=function(c0,c1){return c1.join(c0);};bw.forall=function(c0,c1){return D.forall(c0,bw.protect(c1));};bw.protect=function(c0){return c0==null?"":c0;};bx.toSafe=function(c0){return c0==null?"":c0;};by=_.HashSet=cV.Class({SAdd:function(c0){return this.add(c0);},Contains:function(c0){var c1;c1=this.data[this.hash(c0)];return c1==null?false:this.arrContains(c0,c1);},add:function(c0){var c1,c2;c1=this.hash(c0);c2=this.data[c1];return c2==null?(this.data[c1]=[c0],this.count=this.count+1,true):this.arrContains(c0,c2)?false:(c2.push(c0),this.count=this.count+1,true);},arrContains:function(c0,c1){var c2,c3,c4,c5;c2=true;c3=0;c5=c1.length;while(c2&&c3<c5)if(this.equals.apply(null,[c1[c3],c0]))c2=false;else c3=c3+1;return!c2;},GetEnumerator:function(){return M.Get(cC.concat(this.data));},ExceptWith:function(c0){var c1;c1=M.Get(c0);try{while(c1.MoveNext())this.Remove(c1.Current());}finally{if(typeof c1=="object"&&"Dispose"in c1)c1.Dispose();}},Count:function(){return this.count;},IntersectWith:function(c0){var c1,c2,c3,c4,c5;c1=new by.New$4(c0,this.equals,this.hash);c2=cC.concat(this.data);for(c3=0,c4=c2.length-1;c3<=c4;c3++){c5=c2[c3];if(!c1.Contains(c5))this.Remove(c5);}},Remove:function(c0){var c1;c1=this.data[this.hash(c0)];return c1==null?false:this.arrRemove(c0,c1)&&(this.count=this.count-1,true);},CopyTo:function(c0,c1){var c2,c3,c4;c2=cC.concat(this.data);for(c3=0,c4=c2.length-1;c3<=c4;c3++)s.set(c0,c3+c1,c2[c3]);},arrRemove:function(c0,c1){var c2,c3,c4,c5;c2=true;c3=0;c5=c1.length;while(c2&&c3<c5)if(this.equals.apply(null,[c1[c3],c0])){c1.splice.apply(c1,[c3,1]);c2=false;}else c3=c3+1;return!c2;}},f,by);by.New$3=cV.Ctor(function(){by.New$4.call(this,[],V.Equals,V.Hash);},by);by.New$4=cV.Ctor(function(c0,c1,c2){var c3;f.New.call(this);this.equals=c1;this.hash=c2;this.data=[];this.count=0;c3=M.Get(c0);try{while(c3.MoveNext())this.add(c3.Current());}finally{if(typeof c3=="object"&&"Dispose"in c3)c3.Dispose();}},by);by.New$2=cV.Ctor(function(c0){by.New$4.call(this,c0,V.Equals,V.Hash);},by);bz.$cctor=function(){bz.$cctor=a.ignore;bz.initialized=new $.New$5();};bz=v.TemplateInitializer=cV.Class({},f,bz);bz.GetOrAddHoleFor=function(c0,c1,c2){var c3,c4,c5,c6;bz.$cctor();c3=bz.GetHolesFor(c0);c4=(c5=null,[c3.TryGetValue(c1,{get:function(){return c5;},set:function(c7){c5=c7;}}),c5]);return c4[0]?c4[1]:(c6=c2(),(c3.set_Item(c1,c6),c6));};bz.GetHolesFor=function(c0){var c1,c2,c3;bz.$cctor();c1=(c2=null,[bz.initialized.TryGetValue(c0,{get:function(){return c2;},set:function(c4){c2=c4;}}),c2]);return c1[0]?c1[1]:(c3=new $.New$5(),(bz.initialized.set_Item(c0,c3),c3));};bA=S.VarBool=cV.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:o.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(c0,c1){(c0(c1))(b2.Checked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:o.Map(a.String,this.fillWith.get_View())};}},x,bA);bA.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},bA);bB=S.VarDateTime=cV.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:o.Map(function(c0){return(new cZ(c0)).toLocaleString();},this.fillWith.get_View())};},AddAttribute:function(c0,c1){(c0(c1))(b2.DateTimeValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:o.Map(function(c0){return(new cZ(c0)).toLocaleString();},this.fillWith.get_View())};}},x,bB);bB.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},bB);bC=S.VarFile=cV.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:o.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(c0,c1){(c0(c1))(b2.FileValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:o.Map(a.String,this.fillWith.get_View())};}},x,bC);bC.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},bC);bD=S.VarDomElement=cV.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},x,bD);bD.New=cV.Ctor(function(c0,c1){x.New.call(this);this.name=c0;this.fillWith=c1;},bD);bF.RunFullDocTemplate=function(c0){var c1,c2,c3;return bF.RenderedFullDocTemplate()==null?(c1=(bF.LoadLocalTemplates(""),bF.PrepareTemplateStrict("",null,self.document.body,null),c2=bF.ChildrenTemplate(self.document.body,c0),c3=self.document.body,function(c4){_6.RunInPlace(true,c3,c4);}(c2),c2),(bF.set_RenderedFullDocTemplate({$:1,$0:c1}),c1)):bF.RenderedFullDocTemplate().$0;};bF.LoadLocalTemplates=function(c0){!bF.LocalTemplatesLoaded()?(bF.set_LocalTemplatesLoaded(true),bF.LoadNestedTemplates(self.document.body,"")):void 0;bF.LoadedTemplates().set_Item(c0,bF.LoadedTemplateFile(""));};bF.NamedTemplate=function(c0,c1,c2){var c3,c4;c3=(c4=null,[bF.LoadedTemplateFile(c0).TryGetValue(c1==null?"":c1.$0,{get:function(){return c4;},set:function(c5){c4=c5;}}),c4]);return c3[0]?bF.ChildrenTemplate(c3[1].cloneNode(true),c2):(cY.warn("Local template doesn't exist",c1),_6.get_Empty());};bF.RenderedFullDocTemplate=function(){cd.$cctor();return cd.RenderedFullDocTemplate;};bF.PrepareTemplateStrict=function(c0,c1,c2,c3){var c4,c5;function c6(da,db){var dc,dd,de,df,dg,di,dj,dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC;function dh(dD){}while(true)switch(da){case 0:if(db!==null){dc=db.nextSibling;if(V.Equals(db.nodeType,be.TEXT_NODE))ce.convertTextNode(db);else if(V.Equals(db.nodeType,be.ELEMENT_NODE))c8(db);db=dc;}else return null;break;case 1:di=b5.string(db.nodeName,{$:1,$0:3},null).toLowerCase();dj=(dd=di.indexOf("."),dd===-1?[c0,di]:[b5.string(di,null,{$:1,$0:dd-1}),b5.string(di,{$:1,$0:dd+1},null)]);dk=dj[1];dl=dj[0];if(dl!=""&&!bF.LoadedTemplates().ContainsKey(dl))return ce.failNotLoaded(dk);else{if(dl==""&&c3!=null)c3.$0(dk);dm=bF.LoadedTemplates().Item(dl);if(!dm.ContainsKey(dk))return ce.failNotLoaded(dk);else{dn=dm.Item(dk);_do=dn.cloneNode(true);dp=new by.New$3();dq=new $.New$5();dr=db.attributes;for(ds=0,dt=dr.length-1;ds<=dt;ds++){du=dr.item(ds).name.toLowerCase();dq.set_Item(du,(dv=dr.item(ds).nodeValue,dv==""?du:dv.toLowerCase()));if(!dp.SAdd(du))cY.warn("Hole mapped twice",du);}for(dw=0,dx=db.childNodes.length-1;dw<=dx;dw++){dy=db.childNodes[dw];if(V.Equals(dy.nodeType,be.ELEMENT_NODE))!dp.SAdd(dy.nodeName.toLowerCase())?cY.warn("Hole filled twice",dk):void 0;}dz=db.childNodes.length===1&&V.Equals(db.firstChild.nodeType,be.TEXT_NODE);if(dz){df=ce.fillTextHole(_do,db.firstChild.textContent,dk);((function(dD){return function(dE){if(dE!=null)dD(dE.$0);};}((dg=function(dD){return function(dE){return dD.SAdd(dE);};}(dp),function(dD){return dh(dg(dD));})))(df));}ce.removeHolesExcept(_do,dp);if(!dz){for(dA=0,dB=db.childNodes.length-1;dA<=dB;dA++){dC=db.childNodes[dA];if(V.Equals(dC.nodeType,be.ELEMENT_NODE))dC.hasAttributes()?ce.fillInstanceAttrs(_do,dC):c7(_do,dC);}}ce.mapHoles(_do,dq);ce.fill(_do,db.parentNode,db);db.parentNode.removeChild(db);return;}}break;}}function c7(da,db){var dc,dd,df,dg;function de(dh,di){var dj;if(df=="title"&&db.hasChildNodes()){dj=cf.ParseHTMLIntoFakeRoot(db.textContent);db.removeChild(db.firstChild);while(dj.hasChildNodes())db.appendChild(dj.firstChild);}else null;c8(db);return ce.fill(db,dh,di);}df=db.nodeName.toLowerCase();bF.foreachNotPreserved(da,"[ws-attr-holes]",function(dh){var di,dj,dk,dl,dm;di=bw.SplitChars(dh.getAttribute("ws-attr-holes"),[" "],1);for(dj=0,dk=di.length-1;dj<=dk;dj++){dl=s.get(di,dj);dh.setAttribute(dl,(dm=new a.RegExp("\\${"+df+"}","ig"),dh.getAttribute(dl).replace(dm,db.textContent)));}});dg=da.querySelector("[ws-hole="+df+"]");if(V.Equals(dg,null)){dc=da.querySelector("[ws-replace="+df+"]");return V.Equals(dc,null)?(dd=da.querySelector("slot[name="+df+"]"),da.tagName.toLowerCase()=="template"?(de(dd.parentNode,dd),void dd.parentNode.removeChild(dd)):null):(de(dc.parentNode,dc),void dc.parentNode.removeChild(dc));}else{while(dg.hasChildNodes())dg.removeChild(dg.lastChild);dg.removeAttribute("ws-hole");return de(dg,null);}}function c8(da){if(!da.hasAttribute("ws-preserve"))if(bw.StartsWith(da.nodeName.toLowerCase(),"ws-"))c_(da);else{ce.convertAttrs(da);c9(da.firstChild);}}function c9(da){return c6(0,da);}function c_(da){return c6(1,da);}function c$(da){var db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm;while(true){db=da.querySelector("[ws-template]");if(V.Equals(db,null)){dc=da.querySelector("[ws-children-template]");if(V.Equals(dc,null)){dd=da.querySelectorAll("template[id]");for(de=1,df=dd.length-1;de<=df;de++){dg=dd[de];if(c4.Contains(dg));else{bF.PrepareTemplateStrict(c0,{$:1,$0:dg.getAttribute("id")},dg,null);c4.SAdd(dg);}}dh=da.querySelectorAll("template[name]");for(di=1,dj=dh.length-1;di<=dj;di++){dk=dh[di];if(c4.Contains(dk));else{bF.PrepareTemplateStrict(c0,{$:1,$0:dk.getAttribute("name")},dk,null);c4.SAdd(dk);}}return null;}else{dl=dc.getAttribute("ws-children-template");dc.removeAttribute("ws-children-template");bF.PrepareTemplateStrict(c0,{$:1,$0:dl},dc,null);da=da;}}else{dm=db.getAttribute("ws-template");(bF.PrepareSingleTemplate(c0,{$:1,$0:dm},db))(null);da=da;}}}c4=new by.New$3();c5=(c1==null?"":c1.$0).toLowerCase();bF.LoadedTemplateFile(c0).set_Item(c5,c2);if(c2.hasChildNodes()){c$(c2);c9(c2.firstChild);}};bF.ChildrenTemplate=function(c0,c1){var c2,c3,c4,c5,c6;c2=bF.InlineTemplate(c0,D.append(c1,bF.GlobalHoles().Values()));c3=c2[1];c4=c2[0];c5=c4.Els;return!V.Equals(c5,null)&&c5.length===1&&(s.get(c5,0)instanceof be&&(V.Equals(s.get(c5,0).nodeType,be.ELEMENT_NODE)&&(c6=s.get(c5,0),true)))?cg.TreeNode(c4,c3):_6.Mk({$:6,$0:c4},c3);};bF.set_RenderedFullDocTemplate=function(c0){cd.$cctor();cd.RenderedFullDocTemplate=c0;};bF.LocalTemplatesLoaded=function(){cd.$cctor();return cd.LocalTemplatesLoaded;};bF.set_LocalTemplatesLoaded=function(c0){cd.$cctor();cd.LocalTemplatesLoaded=c0;};bF.LoadNestedTemplates=function(c0,c1){var c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl;function c2(dm){var dn,_do;if(!c3.ContainsKey(dm)){dn=(_do=null,[c4.TryGetValue(dm,{get:function(){return _do;},set:function(dp){_do=dp;}}),_do]);if(dn[0]){dl.SAdd(dm);c4.RemoveKey(dm);bF.PrepareTemplateStrict(c1,{$:1,$0:dm},dn[1],{$:1,$0:c2});}else cY.warn(dl.Contains(dm)?"Encountered loop when instantiating "+dm:"Local template does not exist: "+dm);}}c3=bF.LoadedTemplateFile(c1);c4=new $.New$5();c5=c0.querySelectorAll("[ws-template]");for(c6=0,c7=c5.length-1;c6<=c7;c6++){c8=c5[c6];c9=c8.getAttribute("ws-template").toLowerCase();c8.removeAttribute("ws-template");c4.set_Item(c9,bF.FakeRootSingle(c8));}c_=c0.querySelectorAll("[ws-children-template]");for(c$=0,da=c_.length-1;c$<=da;c$++){db=c_[c$];dc=db.getAttribute("ws-children-template").toLowerCase();db.removeAttribute("ws-children-template");c4.set_Item(dc,bF.FakeRoot(db));}dd=c0.querySelectorAll("template[id]");for(de=0,df=dd.length-1;de<=df;de++){dg=dd[de];c4.set_Item(dg.getAttribute("id").toLowerCase(),bF.FakeRootFromHTMLTemplate(dg));}dh=c0.querySelectorAll("template[name]");for(di=0,dj=dh.length-1;di<=dj;di++){dk=dh[di];c4.set_Item(dk.getAttribute("name").toLowerCase(),bF.FakeRootFromHTMLTemplate(dk));}dl=new by.New$3();while(c4.count>0)c2(D.head(c4.Keys()));};bF.LoadedTemplates=function(){cd.$cctor();return cd.LoadedTemplates;};bF.LoadedTemplateFile=function(c0){var c1,c2,c3;c1=(c2=null,[bF.LoadedTemplates().TryGetValue(c0,{get:function(){return c2;},set:function(c4){c2=c4;}}),c2]);return c1[0]?c1[1]:(c3=new $.New$5(),(bF.LoadedTemplates().set_Item(c0,c3),c3));};bF.foreachNotPreserved=function(c0,c1,c2){cf.IterSelector(c0,c1,function(c3){if(c3.closest("[ws-preserve]")==null)c2(c3);});};bF.PrepareSingleTemplate=function(c0,c1,c2){var c3;c3=bF.FakeRootSingle(c2);return function(c4){bF.PrepareTemplateStrict(c0,c1,c3,c4);};};bF.InlineTemplate=function(c0,c1){var c2,c3,c4,c5,c6,c_,c$,da,db,dc,dd,de;function c7(df,dg){var dh,di,dj;dh=cl.Insert(df,dg);c$.push(cl.Updates(dh));da.push([df,dh]);di=cV.GetOptional(dh.OnAfterRender);return di==null?null:(dj=di.$0,void db.push(function(){dj(df);}));}function c8(df){var dg,dh,di,dj;dg=(dh=null,[dc.TryGetValue(df,{get:function(){return dh;},set:function(dk){dh=dk;}}),dh]);return dg[0]?(di=dg[1],di instanceof T?{$:1,$0:di.get_Value()}:di instanceof U?{$:1,$0:_6.TextNode(di.get_Value())}:(dj=di.ForTextView(),dj==null?null:{$:1,$0:_6.TextView(dj.$0)})):null;}function c9(){bF.foreachNotPreservedwsDOM("[ws-dom]",function(df){var dg,dh,di,dj,dk,dl,dm;dg=(dh=null,[dc.TryGetValue(df.getAttribute("ws-dom").toLowerCase(),{get:function(){return dh;},set:function(dn){dh=dn;}}),dh]);if(dg[0]){di=dg[1];di instanceof bD?(dj=di.get_Value(),df.removeAttribute("ws-dom"),dk=df,dl=new a.MutationObserver(function(dn,_do){s.iter(function(dp){function dq(dr,ds,dt,du){if(dr===dk&&dp.addedNodes.length!==1){dj.SetFinal(null);_do.disconnect();}}dp.removedNodes.forEach(cV.CreateFuncWithArgs(function(dr){return dq(dr[0],dr[1],dr[2],dr[3]);}),null);},dn);}),df.parentElement!==null?dl.observe(df.parentElement,(dm={},dm.childList=true,dm)):void 0,dj.Set({$:1,$0:df}),o.Sink(function(dn){var _do;if(dn!=null&&dn.$==1){_do=dn.$0;if(dk===_do);else{dk.replaceWith.apply(dk,[_do]);dk=_do;}}else{dk.remove();dl.disconnect();}},dj.get_View())):void 0;}});}c_=[];c$=[];da=[];db=[];dc=new $.New$5();dd=M.Get(c1);try{while(dd.MoveNext()){de=dd.Current();dc.set_Item(de.get_Name(),de);}}finally{if(typeof dd=="object"&&"Dispose"in dd)dd.Dispose();}c2=cf.ChildrenArray(c0);bF.foreachNotPreserved(c0,"[ws-hole]",function(df){var dg,dh,di;di=df.getAttribute("ws-hole");df.removeAttribute("ws-hole");while(df.hasChildNodes())df.removeChild(df.lastChild);dg=c8(di);if(dg!=null&&dg.$==1){dh=dg.$0;br.LinkElement(df,dh.docNode);c_.push(b_.New(cl.Empty(df),dh.docNode,null,df,_8.Int(),null));c$.push(dh.updates);}});bF.foreachNotPreserved(c0,"[ws-replace]",function(df){var dg,dh,di,dj,dk,dl;dg=c8(df.getAttribute("ws-replace"));if(dg!=null&&dg.$==1){dh=dg.$0;di=df.parentNode;dj=self.document.createTextNode("");di.replaceChild(dj,df);dk=br.InsertBeforeDelim(dj,dh.docNode);dl=s.tryFindIndex(function(dm){return df===dm;},c2);dl==null?void 0:s.set(c2,dl.$0,dh.docNode);c_.push(b_.New(cl.Empty(di),dh.docNode,{$:1,$0:[dk,dj]},di,_8.Int(),null));c$.push(dh.updates);}});c3=false;bF.foreachNotPreserved(c0,"slot",function(df){var dg,dh,di,dj;di=df.getAttribute("name");dj=di==""||di==null?"default":di.toLowerCase();if(c3&&dj=="default"||!V.Equals(c0.parentElement,null))void 0;else{while(df.hasChildNodes())df.removeChild(df.lastChild);if(dj=="default")c3=true;dg=c8(dj);if(dg!=null&&dg.$==1){dh=dg.$0;br.LinkElement(df,dh.docNode);c_.push(b_.New(cl.Empty(df),dh.docNode,null,df,_8.Int(),null));c$.push(dh.updates);}}});bF.foreachNotPreserved(c0,"[ws-attr]",function(df){var dg,dh,di,dj;dg=df.getAttribute("ws-attr");df.removeAttribute("ws-attr");dh=(di=null,[dc.TryGetValue(dg,{get:function(){return di;},set:function(dk){di=dk;}}),di]);if(dh[0]){dj=dh[1];dj instanceof co?c7(df,dj.get_Value()):cY.warn("Attribute hole filled with non-attribute data",dg);}});bF.foreachNotPreserved(c0,"[ws-on]",function(df){c7(df,ck.Concat(s.choose(function(dg){var dh,di,dj,dk;dh=bw.SplitChars(dg,[":"],1);di=(dj=null,[dc.TryGetValue(s.get(dh,1),{get:function(){return dj;},set:function(dl){dj=dl;}}),dj]);return di[0]?(dk=di[1],dk instanceof cp?{$:1,$0:b2.Handler(s.get(dh,0),dk.get_Value())}:dk instanceof bj?{$:1,$0:ck.Handler(s.get(dh,0),dk.get_Value())}:(cY.warn("Event hole on"+s.get(dh,0)+" filled with non-event data",s.get(dh,1)),null)):null;},bw.SplitChars(df.getAttribute("ws-on"),[" "],1))));df.removeAttribute("ws-on");});bF.foreachNotPreserved(c0,"[ws-onafterrender]",function(df){var dg,dh,di,dj;dg=df.getAttribute("ws-onafterrender");dh=(di=null,[dc.TryGetValue(dg,{get:function(){return di;},set:function(dk){di=dk;}}),di]);if(dh[0]){dj=dh[1];dj instanceof cq?(df.removeAttribute("ws-onafterrender"),c7(df,b2.OnAfterRender(dj.get_Value()))):dj instanceof cr?(df.removeAttribute("ws-onafterrender"),c7(df,b2.OnAfterRender(dj.get_Value()))):cY.warn("onafterrender hole filled with non-onafterrender data",dg);}});bF.foreachNotPreserved(c0,"[ws-var]",function(df){var dg,dh,di;dg=df.getAttribute("ws-var");df.removeAttribute("ws-var");dh=(di=null,[dc.TryGetValue(dg,{get:function(){return di;},set:function(dj){di=dj;}}),di]);if(dh[0])dh[1].AddAttribute(function(dj){return function(dk){return c7(dj,dk);};},df);});bF.foreachNotPreserved(c0,"[ws-attr-holes]",function(df){var dg,dh,di,dj;dg=new a.RegExp(bF.TextHoleRE(),"g");dh=bw.SplitChars(df.getAttribute("ws-attr-holes"),[" "],1);df.removeAttribute("ws-attr-holes");for(di=0,dj=dh.length-1;di<=dj;di++)(function(){var dk,dl,dm,dn,_do,dp,dq,dr,ds,dt,du,dv,dw;dt=s.get(dh,di);du=df.getAttribute(dt);dk=null;dl=0;dv=[];while(dk=dg.exec(du),dk!==null){dw=b5.string(du,{$:1,$0:dl},{$:1,$0:dg.lastIndex-s.get(dk,0).length-1});dl=dg.lastIndex;dv.push([dw,s.get(dk,1)]);}dn=b5.string(du,{$:1,$0:dl},null);dg.lastIndex=0;_do=s.foldBack(function(dx,dy){return(function(dz){var dA,dB;dA=dz[0];dB=dz[1];return function(dC){var dD,dE,dF,dG,dH;dD=dC[0];dE=dC[1];dF=(dG=(dH=null,[dc.TryGetValue(dB,{get:function(){return dH;},set:function(dI){dH=dI;}}),dH]),dG[0]?dG[1].get_AsChoiceView():{$:0,$0:""});return dF.$==1?[dA,new j({$:1,$0:dD==""?dF.$0:o.Map(function(dI){return dI+dD;},dF.$0),$1:dE})]:[dA+dF.$0+dD,dE];};}(dx))(dy);},dv,[dn,j.Empty]);return c7(df,_do[1].$==1?_do[1].$1.$==1?_do[1].$1.$1.$==1?_do[1].$1.$1.$1.$==0?(dp=_do[0],b2.Dynamic(dt,o.Map3(function(dx,dy,dz){return dp+dx+dy+dz;},_do[1].$0,_do[1].$1.$0,_do[1].$1.$1.$0))):(dq=_do[0],b2.Dynamic(dt,o.Map(function(dx){return dq+bw.concat("",dx);},o.Sequence(_do[1])))):(dr=_do[0],b2.Dynamic(dt,o.Map2(function(dx,dy){return dr+dx+dy;},_do[1].$0,_do[1].$1.$0))):_do[0]==""?b2.Dynamic(dt,_do[1].$0):(ds=_do[0],b2.Dynamic(dt,o.Map(function(dx){return ds+dx;},_do[1].$0))):ck.Create(dt,_do[0]));}());});return[cV.DeleteEmptyFields({Els:c2,Dirty:true,Holes:c_,Attrs:da,Render:(c4=db.length==0?{$:1,$0:function(){c9();}}:{$:1,$0:function(df){c9();s.iter(function(dg){dg(df);},db);}},c4?c4.$0:void 0),El:(c5=!V.Equals(c2,null)&&c2.length===1&&(s.get(c2,0)instanceof be&&(s.get(c2,0)instanceof b3&&(c6=s.get(c2,0),true)))?{$:1,$0:c6}:null,c5?c5.$0:void 0)},["Render","El"]),cs.TreeReduce(o.Const(),o.Map2Unit,c$)];};bF.GlobalHoles=function(){cd.$cctor();return cd.GlobalHoles;};bF.FakeRootSingle=function(c0){var c1,c2,c3,c4;c0.removeAttribute("ws-template");c1=c0.getAttribute("ws-replace");if(c1==null);else{c0.removeAttribute("ws-replace");c2=c0.parentNode;V.Equals(c2,null)?void 0:(c3=self.document.createElement(c0.tagName),c3.setAttribute("ws-replace",c1),c2.replaceChild(c3,c0));}c4=self.document.createElement("div");c4.appendChild(c0);return c4;};bF.FakeRoot=function(c0){var c1;c1=self.document.createElement("div");while(c0.hasChildNodes())c1.appendChild(c0.firstChild);return c1;};bF.FakeRootFromHTMLTemplate=function(c0){var c1,c2,c3,c4;c1=self.document.createElement("div");c2=c0.content;for(c3=0,c4=c2.childNodes.length-1;c3<=c4;c3++)c1.appendChild(c2.childNodes[c3].cloneNode(true));return c1;};bF.TextHoleRE=function(){cd.$cctor();return cd.TextHoleRE;};bF.foreachNotPreservedwsDOM=function(c0,c1){cf.IterSelectorDoc(c0,function(c2){if(c2.closest("[ws-preserve]")==null)c1(c2);});};bG.New=function(c0,c1){return{k:c0,ct:c1};};bH.$cctor=function(){bH.$cctor=a.ignore;bH.noneCT=bI.New(false,[]);bH.scheduler=new bs.New();bH.defCTS=[new bZ.New()];bH.Zero=E.Return();bH.GetCT=function(c0){c0.k({$:0,$0:c0.ct});};};bI.New=function(c0,c1){return{c:c0,r:c1};};bK.New=function(c0){return{Title:c0};};bL.New=function(c0,c1,c2,c3,c4){return{XAxis:c0,YAxis:c1,FillColor:c2,StrokeColor:c3,IsFilled:c4};};bM.New=function(c0,c1,c2,c3){return{PointColor:c0,PointHighlightFill:c1,PointHighlightStroke:c2,PointStrokeColor:c3};};bN.$cctor=function(){bN.$cctor=a.ignore;bN.defaultSize={$:0,$0:500,$1:200};};bO.Select=function(c0,c1){return bO.New(function(c2){return c0.Subscribe(b8.observer(function(c3){c2.OnNext(c1(c3));}));});};bO.Aggregate=function(c0,c1,c2){return bO.New(function(c3){var c4;c4=[c1];return c0.Subscribe(b8.observer(function(c5){c4[0]=c2(c4[0],c5);c3.OnNext(c4[0]);}));});};bO.New=function(c0){return{Subscribe:c0};};bP.$cctor=function(){var c0;bP.$cctor=a.ignore;bP.defaultChartConfig=bK.New("Chart");bP.defaultSeriesChartConfig=bL.New("x","y",new b6({$:0,$0:220,$1:220,$2:220,$3:0.2}),new b6({$:0,$0:220,$1:220,$2:220,$3:1}),true);bP.defaultColorConfig=bM.New(new b6({$:0,$0:220,$1:220,$2:220,$3:1}),new b6({$:1,$0:"#fff"}),new b6({$:0,$0:220,$1:220,$2:220,$3:1}),new b6({$:1,$0:"#fff"}));bP.defaultPolarData=(c0=new B.New(),function(c1){return function(c2){var c3,c4,c5,c6;c3=(c4=c0.Next(0,256),(c5=c0.Next(0,256),(c6=c0.Next(0,256),[new b6({$:0,$0:c4,$1:c5,$2:c6,$3:1}),new b6({$:0,$0:c4,$1:c5,$2:c6,$3:0.6})])));return b9.New(c2,c3[0],c3[1],c1);};});};bR=bn.PieChart=cV.Class({WebSharper_Charting_Charts_IChart_1$get_Config:function(){return this.cfg;},WebSharper_Charting_Charts_IMutableChart_2$OnUpdate:function(c0){this.event.event.Subscribe(b8.observer(c0));},WebSharper_Charting_Charts_IPolarAreaChart_1$get_DataSet:function(){return this.dataset;}},f,bR);bR.New=cV.Ctor(function(c0,c1){f.New.call(this);this.dataset=c0;this.cfg=c1;this.event=new Z.New();},bR);bS.$cctor=function(){bS.$cctor=a.ignore;bS.counter=0;};bU.New=function(c0,c1,c2,c3,c4){return{Node:c0,Left:c1,Right:c2,Height:c3,Count:c4};};bV=_.Pair=cV.Class({Equals:function(c0){return V.Equals(this.Key,c0.Key);},GetHashCode:function(){return V.Hash(this.Key);},CompareTo0:function(c0){return V.Compare(this.Key,c0.Key);}},null,bV);bV.New=function(c0,c1){return new bV({Key:c0,Value:c1});};bW.notPresent=function(){throw new cG.New();};bY=e.OperationCanceledException=cV.Class({},bX,bY);bY.New=cV.Ctor(function(c0){bY.New$1.call(this,"The operation was canceled.",null,c0);},bY);bY.New$1=cV.Ctor(function(c0,c1,c2){this.message=c0;this.inner=c1;ba.setPrototypeOf(this,bY.prototype);this.ct=c2;},bY);bZ=e.CancellationTokenSource=cV.Class({},f,bZ);bZ.New=cV.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bZ);b1=b0.attr=cV.Class({},f,b1);b2.Style=function(c0,c1){return cl.Static(function(c2){c2.style.setProperty(c0,c1);});};b2.OnAfterRender=function(c0){return new ck({$:4,$0:c0});};b2.Handler=function(c0,c1){return cl.Static(function(c2){c2.addEventListener(c0,function(c3){return(c1(c2))(c3);},false);});};b2.Dynamic=function(c0,c1){return cl.Dynamic(c1,function(c2){return function(c3){return c2.setAttribute(c0,c3);};});};b2.FloatValueUnchecked=function(c0){return b2.ValueWith(cL.FloatApplyUnchecked(),c0);};b2.Value=function(c0){return b2.ValueWith(cL.StringApply(),c0);};b2.Checked=function(c0){return b2.ValueWith(cL.BoolCheckedApply(),c0);};b2.DateTimeValue=function(c0){return b2.ValueWith(cL.DateTimeApplyUnchecked(),c0);};b2.FileValue=function(c0){return b2.ValueWith(cL.FileApplyUnchecked(),c0);};b2.ValueWith=function(c0,c1){var c2;c2=c0(c1);return ck.Append(cl.Static(c2[0]),b2.DynamicCustom(c2[1],c2[2]));};b2.DynamicCustom=function(c0,c1){return cl.Dynamic(c1,c0);};b5.array=function(c0,c1,c2){var c3,c4;return c1==null?c2!=null&&c2.$==1?(c3=c2.$0,c3<0?[]:c0.slice(0,c3+1)):[]:c2==null?c0.slice(c1.$0):(c4=c2.$0,c4<0?[]:c0.slice(c1.$0,c4+1));};b5.string=function(c0,c1,c2){var c3,c4;return c1==null?c2!=null&&c2.$==1?(c3=c2.$0,c3<0?"":c0.slice(0,c3+1)):"":c2==null?c0.slice(c1.$0):(c4=c2.$0,c4<0?"":c0.slice(c1.$0,c4+1));};b6=bp.Color=cV.Class({toString:function(){return this.$==1?this.$0:this.$==2?this.$0:"rgba("+a.String(this.$0)+", "+a.String(this.$1)+", "+a.String(this.$2)+", "+this.$3.toFixed(6)+")";}},null,b6);b7=bm.BatchUpdater=cV.Class({Update:function(c0){var c1,c2;function c3(){c1.handle[0]=null;c1.count[0]=0;c0();}c1=this;c2=this.handle[0];if(c2==null);else a.clearTimeout(c2.$0);if(this.count[0]<this.maxCount){this.count[0]++;this.handle[0]={$:1,$0:a.setTimeout(c3,this.interval)};}else c3();}},f,b7);b7.New=cV.Ctor(function(c0,c1){f.New.call(this);this.interval=c0==null?75:c0.$0;this.maxCount=c1==null?10:c1.$0;this.handle=[null];this.count=[0];},b7);b8.observer=function(c0){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:c0};};b9.New=function(c0,c1,c2,c3){return{Value:c0,Color:c1,Highlight:c2,Label:c3};};b_=g.DocElemNode=cV.Class({Equals:function(c0){return this.ElKey===c0.ElKey;},GetHashCode:function(){return this.ElKey;}},null,b_);b_.New=function(c0,c1,c2,c3,c4,c5){var c6;return new b_((c6={Attr:c0,Children:c1,El:c3,ElKey:c4},(cV.SetOptional(c6,"Delimiters",c2),cV.SetOptional(c6,"Render",c5),c6)));};ca.fromSeq=function(c0){var c1;c1=s.ofSeq(D.map(function(c2){return bV.New(c2[0],c2[1]);},D.distinctBy(function(c2){return c2[0];},D.rev(c0))));s.sortInPlace(c1);return bT.Build(c1,0,c1.length-1);};cb.WriteLink=function(c0,c1){var c2;c2=c1.get_IsEmpty()?"":"?"+cb.WriteQuery(c1);return"/"+cb.Concat(c0)+c2;};cb.Concat=function(c0){var c1,c2;c1=[];c2=true;i.iter(function(c3){if(!bw.IsNullOrEmpty(c3)){c2?c2=false:c1.push("/");c1.push(c3);}},c0);return bw.Join("",s.ofSeq(c1));};cb.WriteQuery=function(c0){function c1(c2,c3){return c2+"="+c3;}return bw.concat("&",D.map(function(c2){return c1(c2[0],c2[1]);},bv.ToSeq(c0)));};cd.$cctor=function(){cd.$cctor=a.ignore;cd.LoadedTemplates=new $.New$5();cd.LocalTemplatesLoaded=false;cd.GlobalHoles=new $.New$5();cd.TextHoleRE="\\${([^}]+)}";cd.RenderedFullDocTemplate=null;};ce.convertTextNode=function(c0){var c1,c2,c3,c4,c5,c6;c1=null;c2=0;c4=c0.textContent;c5=new a.RegExp(bF.TextHoleRE(),"g");while(c1=c5.exec(c4),c1!==null){c0.parentNode.insertBefore(self.document.createTextNode(b5.string(c4,{$:1,$0:c2},{$:1,$0:c5.lastIndex-s.get(c1,0).length-1})),c0);c2=c5.lastIndex;c6=self.document.createElement("span");c6.setAttribute("ws-replace",s.get(c1,1).toLowerCase());c0.parentNode.insertBefore(c6,c0);}c5.lastIndex=0;c0.textContent=b5.string(c4,{$:1,$0:c2},null);};ce.failNotLoaded=function(c0){cY.warn("Instantiating non-loaded template",c0);};ce.fillTextHole=function(c0,c1,c2){var c3;c3=c0.querySelector("[ws-replace]");return V.Equals(c3,null)?(cY.warn("Filling non-existent text hole",c2),null):(c3.parentNode.replaceChild(self.document.createTextNode(c1),c3),{$:1,$0:c3.getAttribute("ws-replace")});};ce.removeHolesExcept=function(c0,c1){function c2(c3){bF.foreachNotPreserved(c0,"["+c3+"]",function(c4){if(!c1.Contains(c4.getAttribute(c3)))c4.removeAttribute(c3);});}c2("ws-attr");c2("ws-onafterrender");c2("ws-var");bF.foreachNotPreserved(c0,"[ws-hole]",function(c3){if(!c1.Contains(c3.getAttribute("ws-hole"))){c3.removeAttribute("ws-hole");while(c3.hasChildNodes())c3.removeChild(c3.lastChild);}});bF.foreachNotPreserved(c0,"[ws-replace]",function(c3){if(!c1.Contains(c3.getAttribute("ws-replace")))c3.parentNode.removeChild(c3);});bF.foreachNotPreserved(c0,"[ws-on]",function(c3){c3.setAttribute("ws-on",bw.concat(" ",s.filter(function(c4){return c1.Contains(s.get(bw.SplitChars(c4,[":"],1),1));},bw.SplitChars(c3.getAttribute("ws-on"),[" "],1))));});bF.foreachNotPreserved(c0,"[ws-attr-holes]",function(c3){var c4,c5,c6,c7,c8;c4=bw.SplitChars(c3.getAttribute("ws-attr-holes"),[" "],1);for(c5=0,c6=c4.length-1;c5<=c6;c5++){c7=s.get(c4,c5);c3.setAttribute(c7,(c8=new a.RegExp(bF.TextHoleRE(),"g"),c3.getAttribute(c7).replace(c8,function(c9,c_){return c1.Contains(c_)?c9:"";})));}});};ce.fillInstanceAttrs=function(c0,c1){var c2,c3,c4,c5,c6;ce.convertAttrs(c1);c2=c1.nodeName.toLowerCase();c3=c0.querySelector("[ws-attr="+c2+"]");if(V.Equals(c3,null))cY.warn("Filling non-existent attr hole",c2);else{c3.removeAttribute("ws-attr");for(c4=0,c5=c1.attributes.length-1;c4<=c5;c4++){c6=c1.attributes.item(c4);if(c6.name=="class"&&c3.hasAttribute("class"))c3.setAttribute("class",c3.getAttribute("class")+" "+c6.nodeValue);else c3.setAttribute(c6.name,c6.nodeValue);}}};ce.mapHoles=function(c0,c1){function c2(c3){bF.foreachNotPreserved(c0,"["+c3+"]",function(c4){var c5,c6;c5=(c6=null,[c1.TryGetValue(c4.getAttribute(c3).toLowerCase(),{get:function(){return c6;},set:function(c7){c6=c7;}}),c6]);if(c5[0])c4.setAttribute(c3,c5[1]);});}c2("ws-hole");c2("ws-replace");c2("ws-attr");c2("ws-onafterrender");c2("ws-var");bF.foreachNotPreserved(c0,"[ws-on]",function(c3){c3.setAttribute("ws-on",bw.concat(" ",s.map(function(c4){var c5,c6,c7;c5=bw.SplitChars(c4,[":"],1);c6=(c7=null,[c1.TryGetValue(s.get(c5,1),{get:function(){return c7;},set:function(c8){c7=c8;}}),c7]);return c6[0]?s.get(c5,0)+":"+c6[1]:c4;},bw.SplitChars(c3.getAttribute("ws-on"),[" "],1))));});bF.foreachNotPreserved(c0,"[ws-attr-holes]",function(c3){var c4,c5,c6;c4=bw.SplitChars(c3.getAttribute("ws-attr-holes"),[" "],1);for(c5=0,c6=c4.length-1;c5<=c6;c5++)(function(){var c7;function c8(c9,c_){var c$;c$=n.KeyValue(c_);return c9.replace(new a.RegExp("\\${"+c$[0]+"}","ig"),"${"+c$[1]+"}");}c7=s.get(c4,c5);return c3.setAttribute(c7,(((cV.Curried3(D.fold))(c8))(c3.getAttribute(c7)))(c1));}());});};ce.fill=function(c0,c1,c2){while(true)if(c0.hasChildNodes())c2=c1.insertBefore(c0.lastChild,c2);else return null;};ce.convertAttrs=function(c0){var c2,c3,c4,c5,c6,c7,c8,c9;function c1(c_){var c$;c$=c0.getAttribute(c_);if(c$==null);else c0.setAttribute(c_,c$.toLowerCase());}c2=c0.attributes;c3=[];c4=[];c5=[];for(c6=0,c7=c2.length-1;c6<=c7;c6++){c8=c2.item(c6);if(bw.StartsWith(c8.nodeName,"ws-on")&&c8.nodeName!="ws-onafterrender"&&c8.nodeName!="ws-on"){c3.push(c8.nodeName);c4.push(b5.string(c8.nodeName,{$:1,$0:"ws-on".length},null)+":"+c8.nodeValue.toLowerCase());}else!bw.StartsWith(c8.nodeName,"ws-")&&(new a.RegExp(bF.TextHoleRE())).test(c8.nodeValue)?(c8.nodeValue=(c9=new a.RegExp(bF.TextHoleRE(),"g"),c8.nodeValue.replace(c9,function(c_,c$){return"${"+c$.toLowerCase()+"}";})),c5.push(c8.nodeName)):void 0;}if(!(c4.length==0))c0.setAttribute("ws-on",bw.concat(" ",c4));if(!(c5.length==0))c0.setAttribute("ws-attr-holes",bw.concat(" ",c5));c1("ws-hole");c1("ws-replace");c1("ws-attr");c1("ws-onafterrender");c1("ws-var");s.iter(function(c_){c0.removeAttribute(c_);},c3);};cf.ParseHTMLIntoFakeRoot=function(c0){var c1,c2,c3,c4,c5;function c6(c7,c8){var c9;while(true)if(c8===0)return c7;else{c9=c8;c7=c7.lastChild;c8=c9-1;}}c1=self.document.createElement("div");return!cf.rhtml().test(c0)?(c1.appendChild(self.document.createTextNode(c0)),c1):(c2=(c3=cf.rtagName().exec(c0),V.Equals(c3,null)?"":s.get(c3,1).toLowerCase()),(c4=(c5=(cf.wrapMap())[c2],c5?c5:cf.defaultWrap()),(c1.innerHTML=c4[1]+c0.replace(cf.rxhtmlTag(),"<$1></$2>")+c4[2],c6(c1,c4[0]))));};cf.rhtml=function(){cD.$cctor();return cD.rhtml;};cf.wrapMap=function(){cD.$cctor();return cD.wrapMap;};cf.defaultWrap=function(){cD.$cctor();return cD.defaultWrap;};cf.rxhtmlTag=function(){cD.$cctor();return cD.rxhtmlTag;};cf.rtagName=function(){cD.$cctor();return cD.rtagName;};cf.IterSelector=function(c0,c1,c2){var c3,c4,c5;c3=c0.querySelectorAll(c1);for(c4=0,c5=c3.length-1;c4<=c5;c4++)c2(c3[c4]);};cf.ChildrenArray=function(c0){var c1,c2,c3;c1=[];for(c2=0,c3=c0.childNodes.length-1;c2<=c3;c2++)c1.push(c0.childNodes[c2]);return c1;};cf.IterSelectorDoc=function(c0,c1){var c2,c3,c4;c2=self.document.querySelectorAll(c0);for(c3=0,c4=c2.length-1;c3<=c4;c3++)c1(c2[c3]);};cf.InsertAt=function(c0,c1,c2){var c3;if(!(c2.parentNode===c0&&c1===(c3=c2.nextSibling,V.Equals(c3,null)?null:c3)))c0.insertBefore(c2,c1);};cf.RemoveNode=function(c0,c1){if(c1.parentNode===c0)c0.removeChild(c1);};cg=g.Elt=cV.Class({},_6,cg);cg.TreeNode=function(c0,c1){var c2,c3;function c4(c5,c6){return cl.Updates(c6);}c2=ct.Create(c1);return new cg.New$1({$:6,$0:c0},o.Map2Unit((c3=s.map(function(c5){return c4(c5[0],c5[1]);},c0.Attrs),cs.TreeReduce(o.Const(),o.Map2Unit,c3)),c2.v),s.get(c0.Els,0),c2);};cg.New=function(c0,c1,c2){var c3,c4;c3=br.CreateElemNode(c0,c1,c2.docNode);c4=ct.Create(c2.updates);return new cg.New$1({$:1,$0:c3},o.Map2Unit(cl.Updates(c3.Attr),c4.v),c0,c4);};cg.New$1=cV.Ctor(function(c0,c1,c2,c3){_6.New.call(this,c0,c1);this.docNode$1=c0;this.updates$1=c1;this.elt=c2;this.rvUpdates=c3;},cg);ch.get_UseAnimations=function(){return cy.UseAnimations();};ch.Play=function(c0){var c1;c1=null;return E.Delay(function(){return E.Bind(ch.Run(a.ignore,cy.Actions(c0)),function(){cy.Finalize(c0);return E.Return(null);});});};ch.Append=function(c0,c1){return{$:0,$0:cF.Append(c0.$0,c1.$0)};};ch.Run=function(c0,c1){var c2;function c3(c4){function c5(c6){return function(c7){var c8;c8=c7-c6;c1.Compute(c8);c0();return c8<=c2?void a.requestAnimationFrame(function(c9){(c5(c6))(c9);}):c4();};}a.requestAnimationFrame(function(c6){(c5(c6))(c6);});}c2=c1.Duration;return c2===0?E.Zero():E.FromContinuations(function(c4,c5,c6){return c3.apply(null,[c4,c5,c6]);});};ch.Concat=function(c0){return{$:0,$0:cF.Concat(D.map(cy.List,c0))};};ch.get_Empty=function(){return{$:0,$0:cF.Empty()};};ci.BatchUpdatesEnabled=function(){cz.$cctor();return cz.BatchUpdatesEnabled;};cj.StartProcessor=function(c0){var c1;function c2(){var c3;c3=null;return E.Delay(function(){return E.Bind(c0,function(){var c4;c4=c1[0];return V.Equals(c4,1)?(c1[0]=0,E.Zero()):V.Equals(c4,2)?(c1[0]=1,c2()):E.Zero();});});}c1=[0];return function(){var c3;c3=c1[0];if(V.Equals(c3,0)){c1[0]=1;E.Start(c2(),null);}else V.Equals(c3,1)?c1[0]=2:void 0;};};ck=g.AttrProxy=cV.Class({},null,ck);ck.Create=function(c0,c1){return cl.Static(function(c2){c2.setAttribute(c0,c1);});};ck.Handler=function(c0,c1){return ck.HandlerImpl(c0,c1);};ck.Concat=function(c0){var c1;c1=cs.ofSeqNonCopying(c0);return cs.TreeReduce(cl.EmptyAttr(),ck.Append,c1);};ck.HandlerImpl=function(c0,c1){return cl.Static(function(c2){c2.addEventListener(c0,function(c3){return(c1(c2))(c3);},false);});};ck.Append=function(c0,c1){return cl.AppendTree(c0,c1);};cl.Static=function(c0){return new ck({$:3,$0:c0});};cl.Insert=function(c0,c1){var c2,c3,c4;function c5(c6){var c7,c8;while(true)if(!(c6===null)){if(c6!=null&&c6.$==1)return c2.push(c6.$0);else if(c6!=null&&c6.$==2){c7=c6.$1;c8=c6.$0;c5(c8);c6=c7;}else return c6!=null&&c6.$==3?c6.$0(c0):c6!=null&&c6.$==4?c3.push(c6.$0):null;}else return null;}c2=[];c3=[];c5(c1);c4=c2.slice(0);return cn.New(c0,cl.Flags(c1),c4,c3.length===0?null:{$:1,$0:function(c6){D.iter(function(c7){c7(c6);},c3);}});};cl.Updates=function(c0){return cs.MapTreeReduce(function(c1){return c1.NChanged();},o.Const(),o.Map2Unit,c0.DynNodes);};cl.Empty=function(c0){return cn.New(c0,0,[],null);};cl.Flags=function(c0){return c0!==null&&c0.hasOwnProperty("flags")?c0.flags:0;};cl.Dynamic=function(c0,c1){return new ck({$:1,$0:new cH.New(c0,c1)});};cl.EmptyAttr=function(){cI.$cctor();return cI.EmptyAttr;};cl.HasExitAnim=function(c0){var c1;c1=2;return(c0.DynFlags&c1)===c1;};cl.GetExitAnim=function(c0){return cl.GetAnim(c0,function(c1,c2){return c1.NGetExitAnim(c2);});};cl.HasEnterAnim=function(c0){var c1;c1=1;return(c0.DynFlags&c1)===c1;};cl.GetEnterAnim=function(c0){return cl.GetAnim(c0,function(c1,c2){return c1.NGetEnterAnim(c2);});};cl.HasChangeAnim=function(c0){var c1;c1=4;return(c0.DynFlags&c1)===c1;};cl.GetChangeAnim=function(c0){return cl.GetAnim(c0,function(c1,c2){return c1.NGetChangeAnim(c2);});};cl.AppendTree=function(c0,c1){var c2;return c0===null?c1:c1===null?c0:(c2=new ck({$:2,$0:c0,$1:c1}),(cl.SetFlags(c2,cl.Flags(c0)|cl.Flags(c1)),c2));};cl.GetAnim=function(c0,c1){return ch.Concat(s.map(function(c2){return c1(c2,c0.DynElem);},c0.DynNodes));};cl.Sync=function(c0,c1){s.iter(function(c2){c2.NSync(c0);},c1.DynNodes);};cl.SetFlags=function(c0,c1){c0.flags=c1;};cn.New=function(c0,c1,c2,c3){var c4;c4={DynElem:c0,DynFlags:c1,DynNodes:c2};cV.SetOptional(c4,"OnAfterRender",c3);return c4;};bT.OfSeq=function(c0){var c1;c1=s.ofSeq(D.distinct(c0));s.sortInPlace(c1);return bT.Build(c1,0,c1.length-1);};bT.Enumerate=function(c0,c1){function c2(c3,c4){var c5;while(true)if(c3==null)return c4.$==1?{$:1,$0:[c4.$0[0],[c4.$0[1],c4.$1]]}:null;else if(c0){c5=c3;c3=c5.Right;c4=new j({$:1,$0:[c5.Node,c5.Left],$1:c4});}else{c5=c3;c3=c5.Left;c4=new j({$:1,$0:[c5.Node,c5.Right],$1:c4});}}return D.unfold(function(c3){return c2(c3[0],c3[1]);},[c1,j.Empty]);};bT.Build=function(c0,c1,c2){var c3,c4,c5;return c2-c1+1<=0?null:(c3=(c1+c2)/2>>0,(c4=bT.Build(c0,c1,c3-1),(c5=bT.Build(c0,c3+1,c2),bT.Branch(s.get(c0,c3),c4,c5))));};bT.Branch=function(c0,c1,c2){var c3,c4;return bU.New(c0,c1,c2,1+(c3=c1==null?0:c1.Height,(c4=c2==null?0:c2.Height,V.Compare(c3,c4)===1?c3:c4)),1+(c1==null?0:c1.Count)+(c2==null?0:c2.Count));};bT.Add=function(c0,c1){return bT.Put(function(c2,c3){return c3;},c0,c1);};bT.Put=function(c0,c1,c2){var c3,c4;c3=bT.Lookup(c1,c2);c4=c3[0];return c4==null?bT.Rebuild(c3[1],bT.Branch(c1,null,null)):bT.Rebuild(c3[1],bT.Branch(c0(c4.Node,c1),c4.Left,c4.Right));};bT.Lookup=function(c0,c1){var c2,c3,c4,c5;c2=[];c3=c1;c4=true;while(c4)if(c3==null)c4=false;else{c5=V.Compare(c0,c3.Node);if(c5===0)c4=false;else c5===1?(c2.unshift([true,c3.Node,c3.Left]),c3=c3.Right):(c2.unshift([false,c3.Node,c3.Right]),c3=c3.Left);}return[c3,c2];};bT.Rebuild=function(c0,c1){var c2,c4,c5,c6,c7,c8,c9,c_,c$,da;function c3(db){return db==null?0:db.Height;}c2=c1;for(c4=0,c5=s.length(c0)-1;c4<=c5;c4++){c2=(c6=s.get(c0,c4),c6[0]?(c7=c6[1],(c8=c6[2],c3(c2)>c3(c8)+1?c3(c2.Left)===c3(c2.Right)+1?(c9=c2.Left,bT.Branch(c9.Node,bT.Branch(c7,c8,c9.Left),bT.Branch(c2.Node,c9.Right,c2.Right))):bT.Branch(c2.Node,bT.Branch(c7,c8,c2.Left),c2.Right):bT.Branch(c7,c8,c2))):(c_=c6[1],(c$=c6[2],c3(c2)>c3(c$)+1?c3(c2.Right)===c3(c2.Left)+1?(da=c2.Right,bT.Branch(da.Node,bT.Branch(c2.Node,c2.Left,da.Left),bT.Branch(c_,da.Right,c$))):bT.Branch(c2.Node,c2.Left,bT.Branch(c_,c2.Right,c$)):bT.Branch(c_,c2,c$))));}return c2;};co=S.Attribute=cV.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},x,co);cp=S.Event=cV.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},x,cp);cq=S.AfterRender=cV.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},x,cq);cr=S.AfterRenderQ=cV.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},x,cr);cs.TreeReduce=function(c0,c1,c2){var c3;function c4(c5){return function(c6){var c7,c8;switch(c6<=0?0:c6===1?c5>=0&&c5<c3?1:(c7=c6,2):(c7=c6,2)){case 0:return c0;case 1:return s.get(c2,c5);case 2:c8=c6/2>>0;return c1((c4(c5))(c8),(c4(c5+c8))(c6-c8));}};}c3=s.length(c2);return(c4(0))(c3);};cs.mapInPlace=function(c0,c1){var c2,c3;for(c2=0,c3=c1.length-1;c2<=c3;c2++)c1[c2]=c0(c1[c2]);return c1;};cs.ofSeqNonCopying=function(c0){var c1,c2;if(c0 instanceof a.Array)return c0;else if(c0 instanceof j)return s.ofList(c0);else if(c0===null)return[];else{c1=[];c2=M.Get(c0);try{while(c2.MoveNext())c1.push(c2.Current());return c1;}finally{if(typeof c2=="object"&&"Dispose"in c2)c2.Dispose();}}};cs.MapTreeReduce=function(c0,c1,c2,c3){var c4;function c5(c6){return function(c7){var c8,c9;switch(c7<=0?0:c7===1?c6>=0&&c6<c4?1:(c8=c7,2):(c8=c7,2)){case 0:return c1;case 1:return c0(s.get(c3,c6));case 2:c9=c7/2>>0;return c2((c5(c6))(c9),(c5(c6+c9))(c7-c9));}};}c4=s.length(c3);return(c5(0))(c4);};ct=g.Updates=cV.Class({},null,ct);ct.Create=function(c0){var c1;c1=null;c1=ct.New(c0,null,function(){var c2;c2=c1.s;return c2===null?(c2=A.Copy(c1.c()),c1.s=c2,A.WhenObsoleteRun(c2,function(){c1.s=null;}),c2):c2;});return c1;};ct.New=function(c0,c1,c2){return new ct({c:c0,s:c1,v:c2});};cu=_.ValueCollection=cV.Class({GetEnumerator:function(){return M.Get(D.map(function(c0){return c0.V;},this.d));}},f,cu);cu.New=cV.Ctor(function(c0){f.New.call(this);this.d=c0;},cu);cw.New=function(c0,c1){return{PreviousNodes:c0,Top:c1};};cx.get_Empty=function(){return{$:0,$0:new by.New$3()};};cx.FindAll=function(c0){var c1;function c2(c5,c6){var c7,c8,c9,c_,c$;while(true)switch(c5){case 0:if(c6!=null&&c6.$==0){c8=c6.$1;c9=c6.$0;c2(0,c9);c6=c8;}else if(c6!=null&&c6.$==1){c_=c6.$0;c6=c_;c5=1;}else if(c6!=null&&c6.$==2){c$=c6.$0;c6=c$.Current;}else return c6!=null&&c6.$==6?(c7=c6.$0.Holes,(function(da){return function(db){s.iter(da,db);};}(c4))(c7)):null;break;case 1:c1.push(c6);c6=c6.Children;c5=0;break;}}function c3(c5){return c2(0,c5);}function c4(c5){return c2(1,c5);}c1=[];c3(c0);return{$:0,$0:new by.New$2(c1)};};cx.Filter=function(c0,c1){return{$:0,$0:cK.Filter(c0,c1.$0)};};cx.Except=function(c0,c1){return{$:0,$0:cK.Except(c0.$0,c1.$0)};};cx.ToArray=function(c0){return cK.ToArray(c0.$0);};cx.Intersect=function(c0,c1){return{$:0,$0:cK.Intersect(c0.$0,c1.$0)};};cy.UseAnimations=function(){cE.$cctor();return cE.UseAnimations;};cy.Actions=function(c0){return cy.ConcatActions(s.choose(function(c1){return c1.$==1?{$:1,$0:c1.$0}:null;},cF.ToArray(c0.$0)));};cy.Finalize=function(c0){s.iter(function(c1){if(c1.$==0)c1.$0();},cF.ToArray(c0.$0));};cy.ConcatActions=function(c0){var c1,c2,c3,c4;c1=cs.ofSeqNonCopying(c0);c2=s.length(c1);return c2===0?cy.Const():c2===1?s.get(c1,0):(c3=D.max(D.map(function(c5){return c5.Duration;},c1)),(c4=s.map(function(c5){return cy.Prolong(c3,c5);},c1),cy.Def(c3,function(c5){s.iter(function(c6){c6.Compute(c5);},c4);})));};cy.List=function(c0){return c0.$0;};cy.Const=function(c0){return cy.Def(0,function(){return c0;});};cy.Def=function(c0,c1){return{Compute:c1,Duration:c0};};cy.Prolong=function(c0,c1){var c2,c3,c4;c2=c1.Compute;c3=c1.Duration;c4=cR.Create(function(){return c1.Compute(c1.Duration);});return{Compute:function(c5){return c5>=c3?c4.f():c2(c5);},Duration:c0};};cz.$cctor=function(){cz.$cctor=a.ignore;cz.BatchUpdatesEnabled=true;};cA.Clear=function(c0){c0.splice(0,s.length(c0));};D.insufficient=function(){return n.FailWith("The input sequence has an insufficient number of elements.");};s.mapiInPlace=function(c0,c1){var c2,c3;for(c2=0,c3=c1.length-1;c2<=c3;c2++)c1[c2]=c0(c2,c1[c2]);return c1;};s.mapInPlace=function(c0,c1){var c2,c3;for(c2=0,c3=c1.length-1;c2<=c3;c2++)c1[c2]=c0(c1[c2]);};D.nonNegative=function(){return n.FailWith("The input must be non-negative.");};cB=_.KeyCollection=cV.Class({GetEnumerator:function(){return M.Get(D.map(function(c0){return c0.K;},this.d));}},f,cB);cB.New=cV.Ctor(function(c0){f.New.call(this);this.d=c0;},cB);cC.concat=function(c0){var c1,c2;c1=[];for(var c3 in c0)c1.push.apply(c1,c0[c3]);return c1;};cD.$cctor=function(){var c0;cD.$cctor=a.ignore;cD.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");cD.rtagName=new a.RegExp("<([\\w:]+)");cD.rhtml=new a.RegExp("<|&#?\\w+;");cD.wrapMap=(c0=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:c0,tbody:c0,tfoot:c0,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});cD.defaultWrap=[0,"",""];};cE.$cctor=function(){cE.$cctor=a.ignore;cE.CubicInOut=cJ.Custom(function(c0){var c1;c1=c0*c0;return 3*c1-2*(c1*c0);});cE.UseAnimations=true;};cF.Append=function(c0,c1){return c0.$==0?c1:c1.$==0?c0:{$:2,$0:c0,$1:c1};};cF.ToArray=function(c0){var c1;function c2(c3){var c4,c5;while(true)if(c3.$==1)return c1.push(c3.$0);else if(c3.$==2){c4=c3.$1;c5=c3.$0;c2(c5);c3=c4;}else return c3.$==3?s.iter(function(c6){c1.push(c6);},c3.$0):null;}c1=[];c2(c0);return c1.slice(0);};cF.Concat=function(c0){var c1;c1=cs.ofSeqNonCopying(c0);return cs.TreeReduce(cF.Empty(),cF.Append,c1);};cF.Empty=function(){cS.$cctor();return cS.Empty;};cG=e.KeyNotFoundException=cV.Class({},bX,cG);cG.New=cV.Ctor(function(){cG.New$1.call(this,"The given key was not present in the dictionary.");},cG);cG.New$1=cV.Ctor(function(c0){this.message=c0;ba.setPrototypeOf(this,cG.prototype);},cG);cH=g.DynamicAttrNode=cV.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(c0){return ch.get_Empty();},NGetEnterAnim:function(c0){return ch.get_Empty();},NGetChangeAnim:function(c0){return ch.get_Empty();},NSync:function(c0){if(this.dirty){(this.push(c0))(this.value);this.dirty=false;}}},f,cH);cH.New=cV.Ctor(function(c0,c1){var c2;c2=this;f.New.call(this);this.push=c1;this.value=void 0;this.dirty=false;this.updates=o.Map(function(c3){c2.value=c3;c2.dirty=true;},c0);},cH);cI.$cctor=function(){var c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db;cI.$cctor=a.ignore;cI.EmptyAttr=null;cI.BoolCheckedApply=function(dc){function dd(de,df){return df!=null&&df.$==1?void(de.checked=df.$0):null;}return[function(de){de.addEventListener("change",function(){return dc.Get()!=de.checked?dc.Set(de.checked):null;});},function(de){return function(df){return dd(de,df);};},o.Map(function(de){return{$:1,$0:de};},dc.get_View())];};cI.StringSet=function(dc){return function(dd){dc.value=dd;};};cI.StringGet=function(dc){return{$:1,$0:dc.value};};cI.StringApply=(c0=cL.StringGet(),(c1=cL.StringSet(),function(dc){return cL.ApplyValue(c0,c1,dc);}));cI.DateTimeSetUnchecked=function(dc){return function(dd){dc.value=(new cZ(dd)).toLocaleString();};};cI.DateTimeGetUnchecked=function(dc){var dd,de,df,dg;dd=dc.value;return cM.isBlank(dd)?{$:1,$0:-8640000000000000}:(de=(df=0,[(dg=cQ.TryParse(dd),dg!=null&&dg.$==1&&(df=dg.$0,true)),df]),de[0]?{$:1,$0:de[1]}:null);};cI.DateTimeApplyUnchecked=(c2=cL.DateTimeGetUnchecked(),(c3=cL.DateTimeSetUnchecked(),function(dc){return cL.ApplyValue(c2,c3,dc);}));cI.FileSetUnchecked=function(){return function(){return null;};};cI.FileGetUnchecked=function(dc){var dd;dd=dc.files;return{$:1,$0:s.ofSeq(D.delay(function(){return D.map(function(de){return dd.item(de);},n.range(0,dd.length-1));}))};};cI.FileApplyUnchecked=(c4=cL.FileGetUnchecked(),(c5=cL.FileSetUnchecked(),function(dc){return cL.FileApplyValue(c4,c5,dc);}));cI.IntSetUnchecked=function(dc){return function(dd){dc.value=a.String(dd);};};cI.IntGetUnchecked=function(dc){var dd,de;dd=dc.value;return cM.isBlank(dd)?{$:1,$0:0}:(de=+dd,de!==de>>0?null:{$:1,$0:de});};cI.IntApplyUnchecked=(c6=cL.IntGetUnchecked(),(c7=cL.IntSetUnchecked(),function(dc){return cL.ApplyValue(c6,c7,dc);}));cI.IntSetChecked=function(dc){return function(dd){var de;de=dd.get_Input();return dc.value!=de?void(dc.value=de):null;};};cI.IntGetChecked=function(dc){var dd,de,df;dd=dc.value;return{$:1,$0:cM.isBlank(dd)?(dc.checkValidity?dc.checkValidity():true)?new cN({$:2,$0:dd}):new cN({$:1,$0:dd}):(de=(df=0,[bf.TryParseInt32(dd,{get:function(){return df;},set:function(dg){df=dg;}}),df]),de[0]?new cN({$:0,$0:de[1],$1:dd}):new cN({$:1,$0:dd}))};};cI.IntApplyChecked=(c8=cL.IntGetChecked(),(c9=cL.IntSetChecked(),function(dc){return cL.ApplyValue(c8,c9,dc);}));cI.FloatSetUnchecked=function(dc){return function(dd){dc.value=a.String(dd);};};cI.FloatGetUnchecked=function(dc){var dd,de;dd=dc.value;return cM.isBlank(dd)?{$:1,$0:0}:(de=+dd,a.isNaN(de)?null:{$:1,$0:de});};cI.FloatApplyUnchecked=(c_=cL.FloatGetUnchecked(),(c$=cL.FloatSetUnchecked(),function(dc){return cL.ApplyValue(c_,c$,dc);}));cI.FloatSetChecked=function(dc){return function(dd){var de;de=dd.get_Input();return dc.value!=de?void(dc.value=de):null;};};cI.FloatGetChecked=function(dc){var dd,de;dd=dc.value;return{$:1,$0:cM.isBlank(dd)?(dc.checkValidity?dc.checkValidity():true)?new cN({$:2,$0:dd}):new cN({$:1,$0:dd}):(de=+dd,a.isNaN(de)?new cN({$:1,$0:dd}):new cN({$:0,$0:de,$1:dd}))};};cI.FloatApplyChecked=(da=cL.FloatGetChecked(),(db=cL.FloatSetChecked(),function(dc){return cL.ApplyValue(da,db,dc);}));};cJ=g.Easing=cV.Class({},f,cJ);cJ.Custom=function(c0){return new cJ.New(c0);};cJ.New=cV.Ctor(function(c0){f.New.call(this);this.transformTime=c0;},cJ);cK.Filter=function(c0,c1){return new by.New$2(s.filter(c0,cK.ToArray(c1)));};cK.Except=function(c0,c1){var c2;c2=new by.New$2(cK.ToArray(c1));c2.ExceptWith(cK.ToArray(c0));return c2;};cK.ToArray=function(c0){var c1;c1=s.create(c0.Count(),void 0);c0.CopyTo(c1,0);return c1;};cK.Intersect=function(c0,c1){var c2;c2=new by.New$2(cK.ToArray(c0));c2.IntersectWith(cK.ToArray(c1));return c2;};cL.ApplyValue=function(c0,c1,c2){var c3;function c4(c5,c6){return c6==null?null:c5(c6.$0);}c3=null;return[function(c5){function c6(){c2.UpdateMaybe(function(c7){var c8;c3=c0(c5);return c3!=null&&c3.$==1&&(!V.Equals(c3.$0,c7)&&(c8=[c3,c3.$0],true))?c8[0]:null;});}c5.addEventListener("change",c6);c5.addEventListener("input",c6);c5.addEventListener("keypress",c6);},function(c5){var c6;c6=c1(c5);return function(c7){return c4(c6,c7);};},o.Map(function(c5){var c6;return c3!=null&&c3.$==1&&(V.Equals(c3.$0,c5)&&(c6=c3.$0,true))?null:{$:1,$0:c5};},c2.get_View())];};cL.StringSet=function(){cI.$cctor();return cI.StringSet;};cL.StringGet=function(){cI.$cctor();return cI.StringGet;};cL.DateTimeSetUnchecked=function(){cI.$cctor();return cI.DateTimeSetUnchecked;};cL.DateTimeGetUnchecked=function(){cI.$cctor();return cI.DateTimeGetUnchecked;};cL.FileApplyValue=function(c0,c1,c2){var c3;function c4(c5,c6){return c6==null?null:c5(c6.$0);}c3=null;return[function(c5){c5.addEventListener("change",function(){c2.UpdateMaybe(function(c6){var c7;c3=c0(c5);return c3!=null&&c3.$==1&&(c3.$0!==c6&&(c7=[c3,c3.$0],true))?c7[0]:null;});});},function(c5){var c6;c6=c1(c5);return function(c7){return c4(c6,c7);};},o.Map(function(c5){var c6;return c3!=null&&c3.$==1&&(V.Equals(c3.$0,c5)&&(c6=c3.$0,true))?null:{$:1,$0:c5};},c2.get_View())];};cL.FileSetUnchecked=function(){cI.$cctor();return cI.FileSetUnchecked;};cL.FileGetUnchecked=function(){cI.$cctor();return cI.FileGetUnchecked;};cL.IntSetUnchecked=function(){cI.$cctor();return cI.IntSetUnchecked;};cL.IntGetUnchecked=function(){cI.$cctor();return cI.IntGetUnchecked;};cL.IntSetChecked=function(){cI.$cctor();return cI.IntSetChecked;};cL.IntGetChecked=function(){cI.$cctor();return cI.IntGetChecked;};cL.FloatSetUnchecked=function(){cI.$cctor();return cI.FloatSetUnchecked;};cL.FloatGetUnchecked=function(){cI.$cctor();return cI.FloatGetUnchecked;};cL.FloatSetChecked=function(){cI.$cctor();return cI.FloatSetChecked;};cL.FloatGetChecked=function(){cI.$cctor();return cI.FloatGetChecked;};cL.FloatApplyUnchecked=function(){cI.$cctor();return cI.FloatApplyUnchecked;};cL.StringApply=function(){cI.$cctor();return cI.StringApply;};cL.BoolCheckedApply=function(){cI.$cctor();return cI.BoolCheckedApply;};cL.DateTimeApplyUnchecked=function(){cI.$cctor();return cI.DateTimeApplyUnchecked;};cL.FileApplyUnchecked=function(){cI.$cctor();return cI.FileApplyUnchecked;};cM.isBlank=function(c0){return bw.forall(cP.IsWhiteSpace,c0);};cN=g.CheckedInput=cV.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,cN);cO.Children=function(c0,c1){var c2,c3,c4;if(c1!=null&&c1.$==1){c4=[];c2=c1.$0[0].nextSibling;while(c2!==c1.$0[1]){c4.push(c2);c2=c2.nextSibling;}return{$:0,$0:c4};}else return{$:0,$0:s.init(c0.childNodes.length,(c3=c0.childNodes,function(c5){return c3[c5];}))};};cO.Except=function(c0,c1){var c2;c2=c0.$0;return{$:0,$0:s.filter(function(c3){return s.forall(function(c4){return!(c3===c4);},c2);},c1.$0)};};cO.Iter=function(c0,c1){s.iter(c0,c1.$0);};cO.DocChildren=function(c0){var c1;function c2(c3){var c4,c5,c6,c7;while(true){if(c3!=null&&c3.$==2){c5=c3.$0;c3=c5.Current;}else if(c3!=null&&c3.$==1)return c1.push(c3.$0.El);else if(c3==null)return null;else if(c3!=null&&c3.$==5)return c1.push(c3.$0);else if(c3!=null&&c3.$==4)return c1.push(c3.$0.Text);else if(c3!=null&&c3.$==6){c4=c3.$0.Els;return(function(c8){return function(c9){s.iter(c8,c9);};}(function(c8){if(c8==null||c8.constructor===ba)c2(c8);else c1.push(c8);}))(c4);}else{c6=c3.$1;c7=c3.$0;c2(c7);c3=c6;}}}c1=[];c2(c0.Children);return{$:0,$0:cs.ofSeqNonCopying(c1)};};cP.IsWhiteSpace=function(c0){return c0.match(new a.RegExp("\\s"))!==null;};cQ.TryParse=function(c0){var c1;c1=cZ.parse(c0);return a.isNaN(c1)?null:{$:1,$0:c1};};bf.TryParse=function(c0,c1,c2,c3){var c4,c5;c4=+c0;c5=c4===c4-c4%1&&c4>=c1&&c4<=c2;if(c5)c3.set(c4);return c5;};cR.Create=function(c0){return cU.New(false,c0,cR.forceLazy);};cR.forceLazy=function(){var c0;c0=this.v();this.c=true;this.v=c0;this.f=cR.cachedLazy;return c0;};cR.cachedLazy=function(){return this.v;};cS.$cctor=function(){cS.$cctor=a.ignore;cS.Empty={$:0};};cU.New=function(c0,c1,c2){return{c:c0,v:c1,f:c2};};cV.OnLoad(function(){c.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
